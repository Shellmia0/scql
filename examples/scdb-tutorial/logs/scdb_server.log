2025-12-01 00:04:21.12112 INFO main.go:74 SCDB version: 0.9.5dev.20251130-21:40:26.5de28ec
2025-12-01 00:04:21.12112 INFO main.go:75 Starting to read config file: /root/autodl-tmp/scql/examples/scdb-tutorial/scdb/conf/config_local.yml
2025-12-01 00:04:21.12112 INFO main.go:88 Starting to connect to database and do bootstrap if necessary...
2025-12-01 00:04:21.12112 INFO main.go:110 Starting to serve request with http...
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43709dbb-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.258246ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP DATABASE IF EXISTS demo"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.375368ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43731eeb-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.222288ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP USER IF EXISTS alice"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.291149ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43753821-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.356457ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP USER IF EXISTS bob"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.43754ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43775e8f-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.423555ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE DATABASE demo"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.494335ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:437c1c41-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.409093ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER `alice` PARTY_CODE 'alice' IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.470192ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:437e1c86-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.113714ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER `bob` PARTY_CODE 'bob' IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.260652ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4380000b-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.666621ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT CREATE, GRANT OPTION, DROP ON demo.* TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.738024ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4382385e-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.581294ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT CREATE, GRANT OPTION, DROP ON demo.* TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.677001ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:438455dd-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.868849ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE demo.user_credit (id string, credit_rank int, income int, age int) REF_TABLE=alice.user_credit DB_TYPE='mysql'"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.956446ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:438688f3-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.049756ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE TABLE demo.user_stats (id string, order_amount double, is_active int) REF_TABLE=bob.user_stats DB_TYPE='mysql'"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.123436ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43889196-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.979776ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"ALTER USER alice WITH ENDPOINT 'localhost:8003'"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.053286ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:438a6682-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.673395ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"ALTER USER bob WITH ENDPOINT 'localhost:8004'"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.734598ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:438c982a-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.086946ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(id, credit_rank, income, age) ON demo.user_credit TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.170661ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:438eac74-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.50525ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_JOIN(id) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.564824ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4390a9c4-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.525473ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_GROUP_BY(credit_rank) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.584682ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43928a28-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.303113ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_AGGREGATE(income) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.373942ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43945e25-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.197488ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_COMPARE(age) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.270671ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43962a04-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.6948ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(id, order_amount, is_active) ON demo.user_stats TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.766725ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:43982291-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.597497ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_JOIN(id) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.66298ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:439a03a3-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.542662ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_AGGREGATE(order_amount) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.595236ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:439be269-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.253527ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_COMPARE(is_active) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.304331ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:439dba63-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.190675ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS ON demo FOR alice"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.260253ms|
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:439f99c8-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.891574ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS ON demo FOR bob"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.950592ms|
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"alice.user_credit"}}}}} nodes:{key:"10" value:{node_name:"count.10" op_type:"ObliviousGroupCount" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"11" value:{node_name:"avg.11" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"12" value:{node_name:"avg.12" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"13" value:{node_name:"shuffle.13" op_type:"Shuffle" inputs:{key:"In" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"14" value:{node_name:"make_public.14" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"15" value:{node_name:"filter.15" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"16" value:{node_name:"make_constant.16" op_type:"Constant" outputs:{key:"Out" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} attributes:{key:"scalar" value:{t:{name:".0" elem_type:INT64 int64_data:4}}}}} nodes:{key:"17" value:{node_name:"broadcast.17" op_type:"BroadcastTo" inputs:{key:"In" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"ShapeRefTensor" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"18" value:{node_name:"make_private.18" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"19" value:{node_name:"make_private.19" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"20" value:{node_name:"GreaterEqual.20" op_type:"GreaterEqual" inputs:{key:"Left" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"21" value:{node_name:"make_public.21" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"22" value:{node_name:"apply_filter.22" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"23" value:{node_name:"make_private.23" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"24" value:{node_name:"make_private.24" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"25" value:{node_name:"make_private.25" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"26" value:{node_name:"make_private.26" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"27" value:{node_name:"publish.27" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"credit_rank.42" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"cnt.44" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"cnt"} tensors:{name:"avg_income.46" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_income"} tensors:{name:"avg_amount.48" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_amount"}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"demo.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"make_share.5" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}}}} nodes:{key:"6" value:{node_name:"make_share.6" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"7" value:{node_name:"make_share.7" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"8" value:{node_name:"sort.8" op_type:"Sort" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} attributes:{key:"reverse" value:{t:{name:".0" elem_type:BOOL bool_data:false}}}}} nodes:{key:"9" value:{node_name:"group_mark.9" op_type:"ObliviousGroupMark" inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"16"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"8"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"9"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"10"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"11"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"12"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"13"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"14"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"15"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"17"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"18"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"19"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"20"}} subdags:{jobs:{node_ids:"21"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"22"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"23"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"24"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"25"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"26"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"27"}}}}
2025-12-01 00:04:34.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.4" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"10" value:{node_name:"count.10" op_type:"ObliviousGroupCount" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"11" value:{node_name:"avg.11" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"12" value:{node_name:"avg.12" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"13" value:{node_name:"shuffle.13" op_type:"Shuffle" inputs:{key:"In" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"14" value:{node_name:"make_public.14" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"15" value:{node_name:"filter.15" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"16" value:{node_name:"make_constant.16" op_type:"Constant" outputs:{key:"Out" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} attributes:{key:"scalar" value:{t:{name:".0" elem_type:INT64 int64_data:4}}}}} nodes:{key:"17" value:{node_name:"broadcast.17" op_type:"BroadcastTo" inputs:{key:"In" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"ShapeRefTensor" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"18" value:{node_name:"make_private.18" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"19" value:{node_name:"make_private.19" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"21" value:{node_name:"make_public.21" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"22" value:{node_name:"apply_filter.22" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"23" value:{node_name:"make_private.23" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"24" value:{node_name:"make_private.24" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"25" value:{node_name:"make_private.25" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"26" value:{node_name:"make_private.26" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"demo.user_stats.order_amount.4" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"make_share.5" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}}}} nodes:{key:"6" value:{node_name:"make_share.6" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"7" value:{node_name:"make_share.7" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"8" value:{node_name:"sort.8" op_type:"Sort" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} attributes:{key:"reverse" value:{t:{name:".0" elem_type:BOOL bool_data:false}}}}} nodes:{key:"9" value:{node_name:"group_mark.9" op_type:"ObliviousGroupMark" inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"16"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"8"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"9"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"10"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"11"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"12"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"13"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"14"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"15"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"17"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"18"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"19"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"21"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"22"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"23"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"24"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"25"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"26"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);,table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,},],attr:[sql:select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;,table_refs:[bob.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_5,},RightJoinIndex:{t_6,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_2,},RowsIndexFilter:{t_5,},],out:[Out:{t_7,t_8,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,},RowsIndexFilter:{t_6,},],out:[Out:{t_9,},],attr:[],party:[bob,]}"]
5 [label="make_share:{in:[In:{t_7,},],out:[Out:{t_10,},],attr:[],party:[alice,bob,]}"]
6 [label="make_share:{in:[In:{t_8,},],out:[Out:{t_11,},],attr:[],party:[alice,bob,]}"]
7 [label="make_share:{in:[In:{t_9,},],out:[Out:{t_12,},],attr:[],party:[alice,bob,]}"]
8 [label="sort:{in:[In:{t_10,t_10,t_11,t_12,},Key:{t_10,},],out:[Out:{t_13,t_14,t_15,t_16,},],attr:[reverse:false,],party:[alice,bob,]}"]
9 [label="group_mark:{in:[Key:{t_13,},],out:[Group:{t_17,},],attr:[],party:[alice,bob,]}"]
10 [label="count:{in:[Group:{t_17,},In:{t_17,},],out:[Out:{t_18,},],attr:[],party:[alice,bob,]}"]
11 [label="avg:{in:[Group:{t_17,},In:{t_15,},],out:[Out:{t_19,},],attr:[],party:[alice,bob,]}"]
12 [label="avg:{in:[Group:{t_17,},In:{t_16,},],out:[Out:{t_20,},],attr:[],party:[alice,bob,]}"]
13 [label="shuffle:{in:[In:{t_18,t_19,t_20,t_14,t_17,},],out:[Out:{t_21,t_22,t_23,t_24,t_25,},],attr:[],party:[alice,bob,]}"]
14 [label="make_public:{in:[In:{t_25,},],out:[Out:{t_26,},],attr:[],party:[alice,bob,]}"]
15 [label="filter:{in:[Filter:{t_26,},In:{t_21,t_22,t_23,t_24,},],out:[Out:{t_27,t_28,t_29,t_30,},],attr:[],party:[alice,bob,]}"]
16 [label="make_constant:{in:[],out:[Out:{t_31,},],attr:[scalar:4,],party:[alice,bob,]}"]
17 [label="broadcast:{in:[In:{t_31,},ShapeRefTensor:{t_27,},],out:[Out:{t_32,},],attr:[],party:[alice,bob,]}"]
18 [label="make_private:{in:[In:{t_27,},],out:[Out:{t_33,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
19 [label="make_private:{in:[In:{t_32,},],out:[Out:{t_34,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
20 [label="GreaterEqual:{in:[Left:{t_33,},Right:{t_34,},],out:[Out:{t_35,},],attr:[],party:[alice,]}"]
21 [label="make_public:{in:[In:{t_35,},],out:[Out:{t_36,},],attr:[],party:[alice,bob,]}"]
22 [label="apply_filter:{in:[Filter:{t_36,},In:{t_30,t_27,t_28,t_29,},],out:[Out:{t_37,t_38,t_39,t_40,},],attr:[],party:[alice,bob,]}"]
23 [label="make_private:{in:[In:{t_37,},],out:[Out:{t_41,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
24 [label="make_private:{in:[In:{t_38,},],out:[Out:{t_43,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
25 [label="make_private:{in:[In:{t_39,},],out:[Out:{t_45,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
26 [label="make_private:{in:[In:{t_40,},],out:[Out:{t_47,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
27 [label="publish:{in:[In:{t_41,t_43,t_45,t_47,},],out:[Out:{t_42,t_44,t_46,t_48,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{order_amount:PRIVATE:FLOAT64}"]
10 -> 13 [label = "t_18:{group_mark:SECRET:INT64}"]
11 -> 13 [label = "t_19:{income:SECRET:FLOAT64}"]
12 -> 13 [label = "t_20:{order_amount:SECRET:FLOAT64}"]
13 -> 14 [label = "t_25:{group_mark:SECRET:BOOL}"]
13 -> 15 [label = "t_21:{group_mark:SECRET:INT64}"]
13 -> 15 [label = "t_22:{income:SECRET:FLOAT64}"]
13 -> 15 [label = "t_23:{order_amount:SECRET:FLOAT64}"]
13 -> 15 [label = "t_24:{credit_rank:SECRET:INT64}"]
14 -> 15 [label = "t_26:{group_mark:PUBLIC:BOOL}"]
15 -> 17 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 18 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 22 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 22 [label = "t_28:{income:SECRET:FLOAT64}"]
15 -> 22 [label = "t_29:{order_amount:SECRET:FLOAT64}"]
15 -> 22 [label = "t_30:{credit_rank:SECRET:INT64}"]
16 -> 17 [label = "t_31:{constant_data:PUBLIC:INT64}"]
17 -> 19 [label = "t_32:{constant_data:PUBLIC:INT64}"]
18 -> 20 [label = "t_33:{group_mark:PRIVATE:INT64}"]
19 -> 20 [label = "t_34:{constant_data:PRIVATE:INT64}"]
2 -> 3 [label = "t_5:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_6:{id:PRIVATE:INT64}"]
20 -> 21 [label = "t_35:{GreaterEqual_out:PRIVATE:BOOL}"]
21 -> 22 [label = "t_36:{GreaterEqual_out:PUBLIC:BOOL}"]
22 -> 23 [label = "t_37:{credit_rank:SECRET:INT64}"]
22 -> 24 [label = "t_38:{group_mark:SECRET:INT64}"]
22 -> 25 [label = "t_39:{income:SECRET:FLOAT64}"]
22 -> 26 [label = "t_40:{order_amount:SECRET:FLOAT64}"]
23 -> 27 [label = "t_41:{credit_rank:PRIVATE:INT64}"]
24 -> 27 [label = "t_43:{group_mark:PRIVATE:INT64}"]
25 -> 27 [label = "t_45:{income:PRIVATE:FLOAT64}"]
26 -> 27 [label = "t_47:{order_amount:PRIVATE:FLOAT64}"]
3 -> 5 [label = "t_7:{credit_rank:PRIVATE:INT64}"]
3 -> 6 [label = "t_8:{income:PRIVATE:INT64}"]
4 -> 7 [label = "t_9:{order_amount:PRIVATE:FLOAT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
6 -> 8 [label = "t_11:{income:SECRET:INT64}"]
7 -> 8 [label = "t_12:{order_amount:SECRET:FLOAT64}"]
8 -> 11 [label = "t_15:{income:SECRET:INT64}"]
8 -> 12 [label = "t_16:{order_amount:SECRET:FLOAT64}"]
8 -> 13 [label = "t_14:{credit_rank:SECRET:INT64}"]
8 -> 9 [label = "t_13:{credit_rank:SECRET:INT64}"]
9 -> 10 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 10 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 11 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 12 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 13 [label = "t_17:{group_mark:SECRET:BOOL}"]
}

2025-12-01 00:04:34.12112 INFO executor.go:149 |RequestID:|SessionID:43a187d7-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:22.166179ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"43a187d7-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"3047893305530671302"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.4","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":"INT64","int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_stats.order_amount.4","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":"BOOL","bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"90330ea562051d19e7958091a4915e99b59a2b889844d92326aebef98ece9642"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:04:34.12112 INFO executor.go:149 |RequestID:|SessionID:43a187d7-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:22.392063ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"43a187d7-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"3047893305530671302"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["alice.user_credit"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":"INT64","int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"20":{"node_name":"GreaterEqual.20","op_type":"GreaterEqual","inputs":{"Left":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"27":{"node_name":"publish.27","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"credit_rank.42","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"cnt.44","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["cnt"]},{"name":"avg_income.46","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_income"]},{"name":"avg_amount.48","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_amount"]}]}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":"BOOL","bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["20"]}]},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["27"]}]}]}]},"sub_graph_checksum":"56b793de1735b6977a6ead18fa9a7b67ccb1634b1716e2a3a73dfd8d8ec9efff"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-01 00:04:34.12112 ERROR executor.go:92 |RequestID:|SessionID:43a187d7-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:24.085728ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(43a187d7-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)"|Request:
2025-12-01 00:04:34.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:43a187d7-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:32.378474ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(43a187d7-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT ta.credit_rank, COUNT(*) as cnt, AVG(ta.income) as avg_income, AVG(tb.order_amount) as avg_amount FROM demo.user_credit AS ta INNER JOIN demo.user_stats AS tb ON ta.id = tb.id WHERE ta.age >= 20 AND ta.age <= 30 AND tb.is_active = 1 GROUP BY ta.credit_rank"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=32.417986ms|
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:43a89120-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.670716ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column demo.user_stats.order_amount in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT tb.order_amount FROM demo.user_stats AS tb LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.708667ms|
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:43abd10d-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.595549ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 2th column demo.user_stats.order_amount in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT ta.id, tb.order_amount FROM demo.user_credit AS ta INNER JOIN demo.user_stats AS tb ON ta.id = tb.id LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.633405ms|
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"Column#4.0" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"Column#4.0" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"avg_amount.1" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_amount"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,},],attr:[sql:select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;,table_refs:[bob.user_stats],],party:[bob,]}"]
1 [label="publish:{in:[In:{t_0,},],out:[Out:{t_1,},],attr:[],party:[bob,]}"]
0 -> 1 [label = "t_0:{Column#4:PRIVATE:FLOAT64}"]
}

2025-12-01 00:04:34.12112 INFO executor.go:149 |RequestID:|SessionID:43ae808d-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:1.307612ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"43ae808d-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"2407132246605535116"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"Column#4.0","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"Column#4.0","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"avg_amount.1","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"9bdf24a56c92101a192e6b85eac283b2d281fdef0734eb9a5dbefbd539fb6fde"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:04:34.12112 ERROR executor.go:92 |RequestID:|SessionID:43ae808d-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:1.472367ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(43ae808d-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)"|Request:
2025-12-01 00:04:34.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:43ae808d-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.323402ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(43ae808d-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT AVG(tb.order_amount) as avg_amount FROM demo.user_stats AS tb"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.358098ms|
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.age.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.2" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.3" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"alice.user_credit"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.age.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.2" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.3" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"age.4" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"age"} tensors:{name:"credit_rank.5" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"id.6" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"id"} tensors:{name:"income.7" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,t_3,},],attr:[sql:select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;,table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="publish:{in:[In:{t_0,t_1,t_2,t_3,},],out:[Out:{t_4,t_5,t_6,t_7,},],attr:[],party:[alice,]}"]
0 -> 1 [label = "t_0:{age:PRIVATE:INT64}"]
0 -> 1 [label = "t_1:{credit_rank:PRIVATE:INT64}"]
0 -> 1 [label = "t_2:{id:PRIVATE:STRING}"]
0 -> 1 [label = "t_3:{income:PRIVATE:INT64}"]
}

2025-12-01 00:04:34.12112 INFO executor.go:149 |RequestID:|SessionID:43b22950-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:1.368703ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="}],"job_id":"43b22950-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"8483583585030356345"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["alice.user_credit"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"age.4","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["age"]},{"name":"credit_rank.5","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"id.6","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["id"]},{"name":"income.7","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"1383e9cde0f7f858b38cab17be6540132eff5ffb7b42c0e0acd439fdae615387"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-01 00:04:34.12112 ERROR executor.go:92 |RequestID:|SessionID:43b22950-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:1.539965ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(43b22950-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)"|Request:
2025-12-01 00:04:34.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:43b22950-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.237965ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(43b22950-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT * FROM demo.user_credit LIMIT 5"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.276241ms|
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.id.0" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.is_active.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.2" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.id.0" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.is_active.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.2" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"id.3" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"id"} tensors:{name:"is_active.4" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"} tensors:{name:"order_amount.5" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:04:34.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;,table_refs:[bob.user_stats],],party:[bob,]}"]
1 [label="publish:{in:[In:{t_0,t_1,t_2,},],out:[Out:{t_3,t_4,t_5,},],attr:[],party:[bob,]}"]
0 -> 1 [label = "t_0:{id:PRIVATE:STRING}"]
0 -> 1 [label = "t_1:{is_active:PRIVATE:INT64}"]
0 -> 1 [label = "t_2:{order_amount:PRIVATE:FLOAT64}"]
}

2025-12-01 00:04:34.12112 INFO executor.go:149 |RequestID:|SessionID:43b53f01-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:1.182874ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"43b53f01-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"9117723901669992162"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"id.3","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["id"]},{"name":"is_active.4","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]},{"name":"order_amount.5","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"80579ef7ff72b888a41a6c3071f7c7eee9b03f0c40281198a9a0ec6409f7560e"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:04:34.12112 ERROR executor.go:92 |RequestID:|SessionID:43b53f01-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:1.329062ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(43b53f01-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)"|Request:
2025-12-01 00:04:34.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:43b53f01-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.866097ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(43b53f01-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"SELECT * FROM demo.user_stats LIMIT 5"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.894757ms|
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:34.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:43b815b7-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.719462ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column demo.user_credit.income in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party bob|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"SELECT ta.income FROM demo.user_credit AS ta LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:04:34.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.761335ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b28cee2-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.368626ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP DATABASE IF EXISTS demo"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.468166ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b2b4ee0-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.943031ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP USER IF EXISTS alice"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.023741ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b2d5778-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.631388ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP USER IF EXISTS bob"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.820723ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b2f6f67-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.328946ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE DATABASE demo"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.401022ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b3371b2-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.847448ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER `alice` PARTY_CODE 'alice' IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.916784ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b354dd0-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.597612ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER `bob` PARTY_CODE 'bob' IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.666205ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b36f7ba-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.441427ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT CREATE, GRANT OPTION, DROP ON demo.* TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.502123ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b394e57-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.404276ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT CREATE, GRANT OPTION, DROP ON demo.* TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.482769ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b3b697f-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.20445ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE demo.user_credit (id string, credit_rank int, income int, age int) REF_TABLE=alice.user_credit DB_TYPE='mysql'"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.264641ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b3dbe5e-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:6.970688ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE TABLE demo.user_stats (id string, order_amount double, is_active int) REF_TABLE=bob.user_stats DB_TYPE='mysql'"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=7.043492ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b409c06-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.914801ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"ALTER USER alice WITH ENDPOINT 'localhost:8003'"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.98084ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b42a341-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.311105ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"ALTER USER bob WITH ENDPOINT 'localhost:8004'"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.362125ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b44781f-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.313984ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(id, credit_rank, income, age) ON demo.user_credit TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.373122ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b465669-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.740686ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_JOIN(id) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.801495ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b483ac0-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.864139ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_GROUP_BY(credit_rank) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.928327ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b4a251f-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.770286ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_AGGREGATE(income) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.819931ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b4bf85b-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.727654ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_COMPARE(age) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.780343ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b4dd26e-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.750545ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(id, order_amount, is_active) ON demo.user_stats TO bob"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.808925ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b4f96d6-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.461045ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_JOIN(id) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.511161ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b516896-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.505092ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_AGGREGATE(order_amount) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.558993ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b5340a1-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.514232ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_COMPARE(is_active) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.570847ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b550041-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.979892ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS ON demo FOR alice"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.030052ms|
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:4b56c657-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.65677ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS ON demo FOR bob"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.708506ms|
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.4" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"10" value:{node_name:"count.10" op_type:"ObliviousGroupCount" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"11" value:{node_name:"avg.11" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"12" value:{node_name:"avg.12" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"13" value:{node_name:"shuffle.13" op_type:"Shuffle" inputs:{key:"In" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"14" value:{node_name:"make_public.14" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"15" value:{node_name:"filter.15" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"16" value:{node_name:"make_constant.16" op_type:"Constant" outputs:{key:"Out" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} attributes:{key:"scalar" value:{t:{name:".0" elem_type:INT64 int64_data:4}}}}} nodes:{key:"17" value:{node_name:"broadcast.17" op_type:"BroadcastTo" inputs:{key:"In" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"ShapeRefTensor" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"18" value:{node_name:"make_private.18" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"19" value:{node_name:"make_private.19" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"21" value:{node_name:"make_public.21" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"22" value:{node_name:"apply_filter.22" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"23" value:{node_name:"make_private.23" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"24" value:{node_name:"make_private.24" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"25" value:{node_name:"make_private.25" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"26" value:{node_name:"make_private.26" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"demo.user_stats.order_amount.4" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"make_share.5" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}}}} nodes:{key:"6" value:{node_name:"make_share.6" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"7" value:{node_name:"make_share.7" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"8" value:{node_name:"sort.8" op_type:"Sort" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} attributes:{key:"reverse" value:{t:{name:".0" elem_type:BOOL bool_data:false}}}}} nodes:{key:"9" value:{node_name:"group_mark.9" op_type:"ObliviousGroupMark" inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"16"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"8"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"9"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"10"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"11"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"12"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"13"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"14"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"15"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"17"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"18"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"19"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"21"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"22"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"23"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"24"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"25"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"26"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-01 00:04:47.12112 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"alice.user_credit"}}}}} nodes:{key:"10" value:{node_name:"count.10" op_type:"ObliviousGroupCount" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"11" value:{node_name:"avg.11" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"12" value:{node_name:"avg.12" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"13" value:{node_name:"shuffle.13" op_type:"Shuffle" inputs:{key:"In" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"14" value:{node_name:"make_public.14" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"15" value:{node_name:"filter.15" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"16" value:{node_name:"make_constant.16" op_type:"Constant" outputs:{key:"Out" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} attributes:{key:"scalar" value:{t:{name:".0" elem_type:INT64 int64_data:4}}}}} nodes:{key:"17" value:{node_name:"broadcast.17" op_type:"BroadcastTo" inputs:{key:"In" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"ShapeRefTensor" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"18" value:{node_name:"make_private.18" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"19" value:{node_name:"make_private.19" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"20" value:{node_name:"GreaterEqual.20" op_type:"GreaterEqual" inputs:{key:"Left" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"21" value:{node_name:"make_public.21" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"22" value:{node_name:"apply_filter.22" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"23" value:{node_name:"make_private.23" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"24" value:{node_name:"make_private.24" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"25" value:{node_name:"make_private.25" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"26" value:{node_name:"make_private.26" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"27" value:{node_name:"publish.27" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"credit_rank.42" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"cnt.44" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"cnt"} tensors:{name:"avg_income.46" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_income"} tensors:{name:"avg_amount.48" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_amount"}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"demo.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"make_share.5" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}}}} nodes:{key:"6" value:{node_name:"make_share.6" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"7" value:{node_name:"make_share.7" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"8" value:{node_name:"sort.8" op_type:"Sort" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} attributes:{key:"reverse" value:{t:{name:".0" elem_type:BOOL bool_data:false}}}}} nodes:{key:"9" value:{node_name:"group_mark.9" op_type:"ObliviousGroupMark" inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"16"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"8"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"9"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"10"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"11"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"12"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"13"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"14"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"15"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"17"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"18"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"19"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"20"}} subdags:{jobs:{node_ids:"21"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"22"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"23"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"24"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"25"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"26"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"27"}}}}
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);,table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,},],attr:[sql:select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;,table_refs:[bob.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_5,},RightJoinIndex:{t_6,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_2,},RowsIndexFilter:{t_5,},],out:[Out:{t_7,t_8,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,},RowsIndexFilter:{t_6,},],out:[Out:{t_9,},],attr:[],party:[bob,]}"]
5 [label="make_share:{in:[In:{t_7,},],out:[Out:{t_10,},],attr:[],party:[alice,bob,]}"]
6 [label="make_share:{in:[In:{t_8,},],out:[Out:{t_11,},],attr:[],party:[alice,bob,]}"]
7 [label="make_share:{in:[In:{t_9,},],out:[Out:{t_12,},],attr:[],party:[alice,bob,]}"]
8 [label="sort:{in:[In:{t_10,t_10,t_11,t_12,},Key:{t_10,},],out:[Out:{t_13,t_14,t_15,t_16,},],attr:[reverse:false,],party:[alice,bob,]}"]
9 [label="group_mark:{in:[Key:{t_13,},],out:[Group:{t_17,},],attr:[],party:[alice,bob,]}"]
10 [label="count:{in:[Group:{t_17,},In:{t_17,},],out:[Out:{t_18,},],attr:[],party:[alice,bob,]}"]
11 [label="avg:{in:[Group:{t_17,},In:{t_15,},],out:[Out:{t_19,},],attr:[],party:[alice,bob,]}"]
12 [label="avg:{in:[Group:{t_17,},In:{t_16,},],out:[Out:{t_20,},],attr:[],party:[alice,bob,]}"]
13 [label="shuffle:{in:[In:{t_18,t_19,t_20,t_14,t_17,},],out:[Out:{t_21,t_22,t_23,t_24,t_25,},],attr:[],party:[alice,bob,]}"]
14 [label="make_public:{in:[In:{t_25,},],out:[Out:{t_26,},],attr:[],party:[alice,bob,]}"]
15 [label="filter:{in:[Filter:{t_26,},In:{t_21,t_22,t_23,t_24,},],out:[Out:{t_27,t_28,t_29,t_30,},],attr:[],party:[alice,bob,]}"]
16 [label="make_constant:{in:[],out:[Out:{t_31,},],attr:[scalar:4,],party:[alice,bob,]}"]
17 [label="broadcast:{in:[In:{t_31,},ShapeRefTensor:{t_27,},],out:[Out:{t_32,},],attr:[],party:[alice,bob,]}"]
18 [label="make_private:{in:[In:{t_27,},],out:[Out:{t_33,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
19 [label="make_private:{in:[In:{t_32,},],out:[Out:{t_34,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
20 [label="GreaterEqual:{in:[Left:{t_33,},Right:{t_34,},],out:[Out:{t_35,},],attr:[],party:[alice,]}"]
21 [label="make_public:{in:[In:{t_35,},],out:[Out:{t_36,},],attr:[],party:[alice,bob,]}"]
22 [label="apply_filter:{in:[Filter:{t_36,},In:{t_30,t_27,t_28,t_29,},],out:[Out:{t_37,t_38,t_39,t_40,},],attr:[],party:[alice,bob,]}"]
23 [label="make_private:{in:[In:{t_37,},],out:[Out:{t_41,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
24 [label="make_private:{in:[In:{t_38,},],out:[Out:{t_43,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
25 [label="make_private:{in:[In:{t_39,},],out:[Out:{t_45,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
26 [label="make_private:{in:[In:{t_40,},],out:[Out:{t_47,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
27 [label="publish:{in:[In:{t_41,t_43,t_45,t_47,},],out:[Out:{t_42,t_44,t_46,t_48,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{order_amount:PRIVATE:FLOAT64}"]
10 -> 13 [label = "t_18:{group_mark:SECRET:INT64}"]
11 -> 13 [label = "t_19:{income:SECRET:FLOAT64}"]
12 -> 13 [label = "t_20:{order_amount:SECRET:FLOAT64}"]
13 -> 14 [label = "t_25:{group_mark:SECRET:BOOL}"]
13 -> 15 [label = "t_21:{group_mark:SECRET:INT64}"]
13 -> 15 [label = "t_22:{income:SECRET:FLOAT64}"]
13 -> 15 [label = "t_23:{order_amount:SECRET:FLOAT64}"]
13 -> 15 [label = "t_24:{credit_rank:SECRET:INT64}"]
14 -> 15 [label = "t_26:{group_mark:PUBLIC:BOOL}"]
15 -> 17 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 18 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 22 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 22 [label = "t_28:{income:SECRET:FLOAT64}"]
15 -> 22 [label = "t_29:{order_amount:SECRET:FLOAT64}"]
15 -> 22 [label = "t_30:{credit_rank:SECRET:INT64}"]
16 -> 17 [label = "t_31:{constant_data:PUBLIC:INT64}"]
17 -> 19 [label = "t_32:{constant_data:PUBLIC:INT64}"]
18 -> 20 [label = "t_33:{group_mark:PRIVATE:INT64}"]
19 -> 20 [label = "t_34:{constant_data:PRIVATE:INT64}"]
2 -> 3 [label = "t_5:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_6:{id:PRIVATE:INT64}"]
20 -> 21 [label = "t_35:{GreaterEqual_out:PRIVATE:BOOL}"]
21 -> 22 [label = "t_36:{GreaterEqual_out:PUBLIC:BOOL}"]
22 -> 23 [label = "t_37:{credit_rank:SECRET:INT64}"]
22 -> 24 [label = "t_38:{group_mark:SECRET:INT64}"]
22 -> 25 [label = "t_39:{income:SECRET:FLOAT64}"]
22 -> 26 [label = "t_40:{order_amount:SECRET:FLOAT64}"]
23 -> 27 [label = "t_41:{credit_rank:PRIVATE:INT64}"]
24 -> 27 [label = "t_43:{group_mark:PRIVATE:INT64}"]
25 -> 27 [label = "t_45:{income:PRIVATE:FLOAT64}"]
26 -> 27 [label = "t_47:{order_amount:PRIVATE:FLOAT64}"]
3 -> 5 [label = "t_7:{credit_rank:PRIVATE:INT64}"]
3 -> 6 [label = "t_8:{income:PRIVATE:INT64}"]
4 -> 7 [label = "t_9:{order_amount:PRIVATE:FLOAT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
6 -> 8 [label = "t_11:{income:SECRET:INT64}"]
7 -> 8 [label = "t_12:{order_amount:SECRET:FLOAT64}"]
8 -> 11 [label = "t_15:{income:SECRET:INT64}"]
8 -> 12 [label = "t_16:{order_amount:SECRET:FLOAT64}"]
8 -> 13 [label = "t_14:{credit_rank:SECRET:INT64}"]
8 -> 9 [label = "t_13:{credit_rank:SECRET:INT64}"]
9 -> 10 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 10 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 11 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 12 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 13 [label = "t_17:{group_mark:SECRET:BOOL}"]
}

2025-12-01 00:04:47.12112 INFO executor.go:149 |RequestID:|SessionID:4b589cce-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:131.212292ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"4b589cce-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"5624734646382920955"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.4","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":"INT64","int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_stats.order_amount.4","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":"BOOL","bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"90330ea562051d19e7958091a4915e99b59a2b889844d92326aebef98ece9642"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:04:47.12112 ERROR executor.go:92 |RequestID:|SessionID:4b589cce-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:134.517778ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(4b589cce-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: MySQL: [MySQL]: [Comment]: mysql_stmt_execute error	[mysql_stmt_error]: Unknown or incorrect time zone: 'UTC'	[mysql_stmt_errno]: 1298	[mysql_stmt_sqlstate]: HY000	[statemnt]: SET time_zone = 'UTC';"|Request:
2025-12-01 00:04:47.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4b589cce-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:141.699599ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(4b589cce-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: MySQL: [MySQL]: [Comment]: mysql_stmt_execute error	[mysql_stmt_error]: Unknown or incorrect time zone: 'UTC'	[mysql_stmt_errno]: 1298	[mysql_stmt_sqlstate]: HY000	[statemnt]: SET time_zone = 'UTC';|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT ta.credit_rank, COUNT(*) as cnt, AVG(ta.income) as avg_income, AVG(tb.order_amount) as avg_amount FROM demo.user_credit AS ta INNER JOIN demo.user_stats AS tb ON ta.id = tb.id WHERE ta.age >= 20 AND ta.age <= 30 AND tb.is_active = 1 GROUP BY ta.credit_rank"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=141.733066ms|
2025-12-01 00:04:47.12112 INFO executor.go:149 |RequestID:|SessionID:4b589cce-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:132.041611ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"4b589cce-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"5624734646382920955"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["alice.user_credit"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":"INT64","int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"20":{"node_name":"GreaterEqual.20","op_type":"GreaterEqual","inputs":{"Left":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"27":{"node_name":"publish.27","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"credit_rank.42","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"cnt.44","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["cnt"]},{"name":"avg_income.46","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_income"]},{"name":"avg_amount.48","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_amount"]}]}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":"BOOL","bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["20"]}]},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["27"]}]}]}]},"sub_graph_checksum":"56b793de1735b6977a6ead18fa9a7b67ccb1634b1716e2a3a73dfd8d8ec9efff"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4b7211bb-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.870772ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column demo.user_stats.order_amount in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT tb.order_amount FROM demo.user_stats AS tb LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.907432ms|
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4b751ecc-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.34617ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 2th column demo.user_stats.order_amount in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT ta.id, tb.order_amount FROM demo.user_credit AS ta INNER JOIN demo.user_stats AS tb ON ta.id = tb.id LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.378739ms|
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"Column#4.0" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"Column#4.0" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"avg_amount.1" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_amount"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,},],attr:[sql:select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;,table_refs:[bob.user_stats],],party:[bob,]}"]
1 [label="publish:{in:[In:{t_0,},],out:[Out:{t_1,},],attr:[],party:[bob,]}"]
0 -> 1 [label = "t_0:{Column#4:PRIVATE:FLOAT64}"]
}

2025-12-01 00:04:47.12112 INFO executor.go:149 |RequestID:|SessionID:4b777433-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:1.644915ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"4b777433-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"3197730388305118384"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"Column#4.0","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"Column#4.0","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"avg_amount.1","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"9bdf24a56c92101a192e6b85eac283b2d281fdef0734eb9a5dbefbd539fb6fde"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:04:47.12112 ERROR executor.go:92 |RequestID:|SessionID:4b777433-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:1.769282ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(4b777433-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: MySQL: [MySQL]: [Comment]: mysql_stmt_execute error	[mysql_stmt_error]: Unknown or incorrect time zone: 'UTC'	[mysql_stmt_errno]: 1298	[mysql_stmt_sqlstate]: HY000	[statemnt]: SET time_zone = 'UTC';"|Request:
2025-12-01 00:04:47.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4b777433-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.806422ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(4b777433-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: MySQL: [MySQL]: [Comment]: mysql_stmt_execute error	[mysql_stmt_error]: Unknown or incorrect time zone: 'UTC'	[mysql_stmt_errno]: 1298	[mysql_stmt_sqlstate]: HY000	[statemnt]: SET time_zone = 'UTC';|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT AVG(tb.order_amount) as avg_amount FROM demo.user_stats AS tb"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.837301ms|
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:47.12112 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.age.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.2" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.3" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"alice.user_credit"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.age.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.2" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.3" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"age.4" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"age"} tensors:{name:"credit_rank.5" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"id.6" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"id"} tensors:{name:"income.7" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:04:47.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,t_3,},],attr:[sql:select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;,table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="publish:{in:[In:{t_0,t_1,t_2,t_3,},],out:[Out:{t_4,t_5,t_6,t_7,},],attr:[],party:[alice,]}"]
0 -> 1 [label = "t_0:{age:PRIVATE:INT64}"]
0 -> 1 [label = "t_1:{credit_rank:PRIVATE:INT64}"]
0 -> 1 [label = "t_2:{id:PRIVATE:STRING}"]
0 -> 1 [label = "t_3:{income:PRIVATE:INT64}"]
}

2025-12-01 00:04:47.12112 INFO executor.go:149 |RequestID:|SessionID:4b7a1e41-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:1.96531ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="}],"job_id":"4b7a1e41-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"2356471642133260853"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["alice.user_credit"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"age.4","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["age"]},{"name":"credit_rank.5","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"id.6","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["id"]},{"name":"income.7","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"1383e9cde0f7f858b38cab17be6540132eff5ffb7b42c0e0acd439fdae615387"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-01 00:04:47.12112 ERROR executor.go:92 |RequestID:|SessionID:4b7a1e41-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:2.133202ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(4b7a1e41-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: MySQL: [MySQL]: [Comment]: mysql_stmt_execute error	[mysql_stmt_error]: Unknown or incorrect time zone: 'UTC'	[mysql_stmt_errno]: 1298	[mysql_stmt_sqlstate]: HY000	[statemnt]: SET time_zone = 'UTC';"|Request:
2025-12-01 00:04:47.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4b7a1e41-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.769983ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(4b7a1e41-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: MySQL: [MySQL]: [Comment]: mysql_stmt_execute error	[mysql_stmt_error]: Unknown or incorrect time zone: 'UTC'	[mysql_stmt_errno]: 1298	[mysql_stmt_sqlstate]: HY000	[statemnt]: SET time_zone = 'UTC';|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT * FROM demo.user_credit LIMIT 5"|ClientIP:127.0.0.1
2025-12-01 00:04:47.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.812844ms|
2025-12-01 00:04:48.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:48.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:48.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.id.0" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.is_active.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.2" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.id.0" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.is_active.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.2" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"id.3" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"id"} tensors:{name:"is_active.4" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"} tensors:{name:"order_amount.5" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:04:48.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;,table_refs:[bob.user_stats],],party:[bob,]}"]
1 [label="publish:{in:[In:{t_0,t_1,t_2,},],out:[Out:{t_3,t_4,t_5,},],attr:[],party:[bob,]}"]
0 -> 1 [label = "t_0:{id:PRIVATE:STRING}"]
0 -> 1 [label = "t_1:{is_active:PRIVATE:INT64}"]
0 -> 1 [label = "t_2:{order_amount:PRIVATE:FLOAT64}"]
}

2025-12-01 00:04:48.12112 INFO executor.go:149 |RequestID:|SessionID:4b7d0e57-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:1.738878ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"4b7d0e57-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"4624569168617172687"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"id.3","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["id"]},{"name":"is_active.4","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]},{"name":"order_amount.5","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"80579ef7ff72b888a41a6c3071f7c7eee9b03f0c40281198a9a0ec6409f7560e"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:04:48.12112 ERROR executor.go:92 |RequestID:|SessionID:4b7d0e57-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:1.893521ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(4b7d0e57-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: MySQL: [MySQL]: [Comment]: mysql_stmt_execute error	[mysql_stmt_error]: Unknown or incorrect time zone: 'UTC'	[mysql_stmt_errno]: 1298	[mysql_stmt_sqlstate]: HY000	[statemnt]: SET time_zone = 'UTC';"|Request:
2025-12-01 00:04:48.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4b7d0e57-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.58261ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(4b7d0e57-ce06-11f0-91a2-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: MySQL: [MySQL]: [Comment]: mysql_stmt_execute error	[mysql_stmt_error]: Unknown or incorrect time zone: 'UTC'	[mysql_stmt_errno]: 1298	[mysql_stmt_sqlstate]: HY000	[statemnt]: SET time_zone = 'UTC';|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"SELECT * FROM demo.user_stats LIMIT 5"|ClientIP:127.0.0.1
2025-12-01 00:04:48.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.617916ms|
2025-12-01 00:04:48.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:04:48.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:48.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:04:48.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4b7fb48f-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.93697ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column demo.user_credit.income in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party bob|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"SELECT ta.income FROM demo.user_credit AS ta LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:04:48.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.030686ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57e69daa-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:7.170556ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP DATABASE IF EXISTS demo"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=7.298796ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57e960f9-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.853833ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP USER IF EXISTS alice"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.939533ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57eb92bc-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.993222ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP USER IF EXISTS bob"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.795805ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57ede990-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.535937ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE DATABASE demo"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.608866ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57f16a88-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.076018ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER `alice` PARTY_CODE 'alice' IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.132768ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57f3ac90-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.261781ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER `bob` PARTY_CODE 'bob' IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.337118ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57f57311-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.1506ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT CREATE, GRANT OPTION, DROP ON demo.* TO alice"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.21487ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57f76f78-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.614101ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT CREATE, GRANT OPTION, DROP ON demo.* TO bob"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.679559ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57f93b5d-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.483667ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE demo.user_credit (id string, credit_rank int, income int, age int) REF_TABLE=alice.user_credit DB_TYPE='mysql'"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.558645ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57fb1e3a-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.463645ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE TABLE demo.user_stats (id string, order_amount double, is_active int) REF_TABLE=bob.user_stats DB_TYPE='mysql'"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.523982ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57fcfae5-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.17602ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"ALTER USER alice WITH ENDPOINT 'localhost:8003'"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.250625ms|
2025-12-01 00:05:08.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:57feb436-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.772586ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"ALTER USER bob WITH ENDPOINT 'localhost:8004'"|ClientIP:127.0.0.1
2025-12-01 00:05:08.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.848452ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:580025c3-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.235164ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(id, credit_rank, income, age) ON demo.user_credit TO alice"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.296162ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:58020072-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.2851ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_JOIN(id) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.34823ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:58042ff5-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.566859ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_GROUP_BY(credit_rank) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.659337ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:58068c9d-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.60617ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_AGGREGATE(income) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.699149ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:5808741a-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.443783ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_COMPARE(age) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.504355ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:580a4222-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.797823ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(id, order_amount, is_active) ON demo.user_stats TO bob"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.850792ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:580bd974-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.722253ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_JOIN(id) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.780867ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:580e2fec-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.850046ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_AGGREGATE(order_amount) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.914743ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:58101963-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.624792ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_COMPARE(is_active) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.680293ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:5811fd59-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.043939ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS ON demo FOR alice"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.096699ms|
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:5813b8d6-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.682203ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS ON demo FOR bob"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.746374ms|
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"alice.user_credit"}}}}} nodes:{key:"10" value:{node_name:"count.10" op_type:"ObliviousGroupCount" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"11" value:{node_name:"avg.11" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"12" value:{node_name:"avg.12" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"13" value:{node_name:"shuffle.13" op_type:"Shuffle" inputs:{key:"In" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"14" value:{node_name:"make_public.14" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"15" value:{node_name:"filter.15" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"16" value:{node_name:"make_constant.16" op_type:"Constant" outputs:{key:"Out" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} attributes:{key:"scalar" value:{t:{name:".0" elem_type:INT64 int64_data:4}}}}} nodes:{key:"17" value:{node_name:"broadcast.17" op_type:"BroadcastTo" inputs:{key:"In" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"ShapeRefTensor" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"18" value:{node_name:"make_private.18" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"19" value:{node_name:"make_private.19" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"20" value:{node_name:"GreaterEqual.20" op_type:"GreaterEqual" inputs:{key:"Left" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"21" value:{node_name:"make_public.21" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"22" value:{node_name:"apply_filter.22" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"23" value:{node_name:"make_private.23" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"24" value:{node_name:"make_private.24" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"25" value:{node_name:"make_private.25" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"26" value:{node_name:"make_private.26" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"27" value:{node_name:"publish.27" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"credit_rank.42" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"cnt.44" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"cnt"} tensors:{name:"avg_income.46" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_income"} tensors:{name:"avg_amount.48" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_amount"}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"demo.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"make_share.5" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}}}} nodes:{key:"6" value:{node_name:"make_share.6" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"7" value:{node_name:"make_share.7" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"8" value:{node_name:"sort.8" op_type:"Sort" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} attributes:{key:"reverse" value:{t:{name:".0" elem_type:BOOL bool_data:false}}}}} nodes:{key:"9" value:{node_name:"group_mark.9" op_type:"ObliviousGroupMark" inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"16"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"8"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"9"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"10"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"11"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"12"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"13"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"14"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"15"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"17"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"18"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"19"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"20"}} subdags:{jobs:{node_ids:"21"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"22"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"23"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"24"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"25"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"26"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"27"}}}}
2025-12-01 00:05:09.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.4" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"10" value:{node_name:"count.10" op_type:"ObliviousGroupCount" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"11" value:{node_name:"avg.11" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"12" value:{node_name:"avg.12" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"13" value:{node_name:"shuffle.13" op_type:"Shuffle" inputs:{key:"In" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"14" value:{node_name:"make_public.14" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"15" value:{node_name:"filter.15" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"16" value:{node_name:"make_constant.16" op_type:"Constant" outputs:{key:"Out" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} attributes:{key:"scalar" value:{t:{name:".0" elem_type:INT64 int64_data:4}}}}} nodes:{key:"17" value:{node_name:"broadcast.17" op_type:"BroadcastTo" inputs:{key:"In" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"ShapeRefTensor" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"18" value:{node_name:"make_private.18" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"19" value:{node_name:"make_private.19" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"21" value:{node_name:"make_public.21" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"22" value:{node_name:"apply_filter.22" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"23" value:{node_name:"make_private.23" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"24" value:{node_name:"make_private.24" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"25" value:{node_name:"make_private.25" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"26" value:{node_name:"make_private.26" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"demo.user_stats.order_amount.4" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"make_share.5" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}}}} nodes:{key:"6" value:{node_name:"make_share.6" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"7" value:{node_name:"make_share.7" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"8" value:{node_name:"sort.8" op_type:"Sort" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} attributes:{key:"reverse" value:{t:{name:".0" elem_type:BOOL bool_data:false}}}}} nodes:{key:"9" value:{node_name:"group_mark.9" op_type:"ObliviousGroupMark" inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"16"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"8"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"9"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"10"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"11"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"12"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"13"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"14"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"15"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"17"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"18"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"19"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"21"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"22"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"23"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"24"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"25"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"26"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);,table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,},],attr:[sql:select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;,table_refs:[bob.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_5,},RightJoinIndex:{t_6,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_2,},RowsIndexFilter:{t_5,},],out:[Out:{t_7,t_8,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,},RowsIndexFilter:{t_6,},],out:[Out:{t_9,},],attr:[],party:[bob,]}"]
5 [label="make_share:{in:[In:{t_7,},],out:[Out:{t_10,},],attr:[],party:[alice,bob,]}"]
6 [label="make_share:{in:[In:{t_8,},],out:[Out:{t_11,},],attr:[],party:[alice,bob,]}"]
7 [label="make_share:{in:[In:{t_9,},],out:[Out:{t_12,},],attr:[],party:[alice,bob,]}"]
8 [label="sort:{in:[In:{t_10,t_10,t_11,t_12,},Key:{t_10,},],out:[Out:{t_13,t_14,t_15,t_16,},],attr:[reverse:false,],party:[alice,bob,]}"]
9 [label="group_mark:{in:[Key:{t_13,},],out:[Group:{t_17,},],attr:[],party:[alice,bob,]}"]
10 [label="count:{in:[Group:{t_17,},In:{t_17,},],out:[Out:{t_18,},],attr:[],party:[alice,bob,]}"]
11 [label="avg:{in:[Group:{t_17,},In:{t_15,},],out:[Out:{t_19,},],attr:[],party:[alice,bob,]}"]
12 [label="avg:{in:[Group:{t_17,},In:{t_16,},],out:[Out:{t_20,},],attr:[],party:[alice,bob,]}"]
13 [label="shuffle:{in:[In:{t_18,t_19,t_20,t_14,t_17,},],out:[Out:{t_21,t_22,t_23,t_24,t_25,},],attr:[],party:[alice,bob,]}"]
14 [label="make_public:{in:[In:{t_25,},],out:[Out:{t_26,},],attr:[],party:[alice,bob,]}"]
15 [label="filter:{in:[Filter:{t_26,},In:{t_21,t_22,t_23,t_24,},],out:[Out:{t_27,t_28,t_29,t_30,},],attr:[],party:[alice,bob,]}"]
16 [label="make_constant:{in:[],out:[Out:{t_31,},],attr:[scalar:4,],party:[alice,bob,]}"]
17 [label="broadcast:{in:[In:{t_31,},ShapeRefTensor:{t_27,},],out:[Out:{t_32,},],attr:[],party:[alice,bob,]}"]
18 [label="make_private:{in:[In:{t_27,},],out:[Out:{t_33,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
19 [label="make_private:{in:[In:{t_32,},],out:[Out:{t_34,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
20 [label="GreaterEqual:{in:[Left:{t_33,},Right:{t_34,},],out:[Out:{t_35,},],attr:[],party:[alice,]}"]
21 [label="make_public:{in:[In:{t_35,},],out:[Out:{t_36,},],attr:[],party:[alice,bob,]}"]
22 [label="apply_filter:{in:[Filter:{t_36,},In:{t_30,t_27,t_28,t_29,},],out:[Out:{t_37,t_38,t_39,t_40,},],attr:[],party:[alice,bob,]}"]
23 [label="make_private:{in:[In:{t_37,},],out:[Out:{t_41,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
24 [label="make_private:{in:[In:{t_38,},],out:[Out:{t_43,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
25 [label="make_private:{in:[In:{t_39,},],out:[Out:{t_45,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
26 [label="make_private:{in:[In:{t_40,},],out:[Out:{t_47,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
27 [label="publish:{in:[In:{t_41,t_43,t_45,t_47,},],out:[Out:{t_42,t_44,t_46,t_48,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{order_amount:PRIVATE:FLOAT64}"]
10 -> 13 [label = "t_18:{group_mark:SECRET:INT64}"]
11 -> 13 [label = "t_19:{income:SECRET:FLOAT64}"]
12 -> 13 [label = "t_20:{order_amount:SECRET:FLOAT64}"]
13 -> 14 [label = "t_25:{group_mark:SECRET:BOOL}"]
13 -> 15 [label = "t_21:{group_mark:SECRET:INT64}"]
13 -> 15 [label = "t_22:{income:SECRET:FLOAT64}"]
13 -> 15 [label = "t_23:{order_amount:SECRET:FLOAT64}"]
13 -> 15 [label = "t_24:{credit_rank:SECRET:INT64}"]
14 -> 15 [label = "t_26:{group_mark:PUBLIC:BOOL}"]
15 -> 17 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 18 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 22 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 22 [label = "t_28:{income:SECRET:FLOAT64}"]
15 -> 22 [label = "t_29:{order_amount:SECRET:FLOAT64}"]
15 -> 22 [label = "t_30:{credit_rank:SECRET:INT64}"]
16 -> 17 [label = "t_31:{constant_data:PUBLIC:INT64}"]
17 -> 19 [label = "t_32:{constant_data:PUBLIC:INT64}"]
18 -> 20 [label = "t_33:{group_mark:PRIVATE:INT64}"]
19 -> 20 [label = "t_34:{constant_data:PRIVATE:INT64}"]
2 -> 3 [label = "t_5:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_6:{id:PRIVATE:INT64}"]
20 -> 21 [label = "t_35:{GreaterEqual_out:PRIVATE:BOOL}"]
21 -> 22 [label = "t_36:{GreaterEqual_out:PUBLIC:BOOL}"]
22 -> 23 [label = "t_37:{credit_rank:SECRET:INT64}"]
22 -> 24 [label = "t_38:{group_mark:SECRET:INT64}"]
22 -> 25 [label = "t_39:{income:SECRET:FLOAT64}"]
22 -> 26 [label = "t_40:{order_amount:SECRET:FLOAT64}"]
23 -> 27 [label = "t_41:{credit_rank:PRIVATE:INT64}"]
24 -> 27 [label = "t_43:{group_mark:PRIVATE:INT64}"]
25 -> 27 [label = "t_45:{income:PRIVATE:FLOAT64}"]
26 -> 27 [label = "t_47:{order_amount:PRIVATE:FLOAT64}"]
3 -> 5 [label = "t_7:{credit_rank:PRIVATE:INT64}"]
3 -> 6 [label = "t_8:{income:PRIVATE:INT64}"]
4 -> 7 [label = "t_9:{order_amount:PRIVATE:FLOAT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
6 -> 8 [label = "t_11:{income:SECRET:INT64}"]
7 -> 8 [label = "t_12:{order_amount:SECRET:FLOAT64}"]
8 -> 11 [label = "t_15:{income:SECRET:INT64}"]
8 -> 12 [label = "t_16:{order_amount:SECRET:FLOAT64}"]
8 -> 13 [label = "t_14:{credit_rank:SECRET:INT64}"]
8 -> 9 [label = "t_13:{credit_rank:SECRET:INT64}"]
9 -> 10 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 10 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 11 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 12 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 13 [label = "t_17:{group_mark:SECRET:BOOL}"]
}

2025-12-01 00:05:09.12112 INFO executor.go:149 |RequestID:|SessionID:5815c3b8-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:326.104312ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"5815c3b8-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"6752751233613123268"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.4","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":"INT64","int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_stats.order_amount.4","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":"BOOL","bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"90330ea562051d19e7958091a4915e99b59a2b889844d92326aebef98ece9642"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:05:09.12112 INFO executor.go:149 |RequestID:|SessionID:5815c3b8-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:326.829424ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"5815c3b8-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"6752751233613123268"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["alice.user_credit"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":"INT64","int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"20":{"node_name":"GreaterEqual.20","op_type":"GreaterEqual","inputs":{"Left":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"27":{"node_name":"publish.27","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"credit_rank.42","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"cnt.44","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["cnt"]},{"name":"avg_income.46","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_income"]},{"name":"avg_amount.48","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_amount"]}]}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":"BOOL","bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["20"]}]},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["27"]}]}]}]},"sub_graph_checksum":"56b793de1735b6977a6ead18fa9a7b67ccb1634b1716e2a3a73dfd8d8ec9efff"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-01 00:05:09.12112 INFO executor.go:94 |RequestID:|SessionID:5815c3b8-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:329.744348ms|Reason:|ErrorMsg:|Request:
2025-12-01 00:05:09.12112 INFO session.go:136 for safety, we filter the results for groups which contain less than 4 items.
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:5815c3b8-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:343.716776ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT ta.credit_rank, COUNT(*) as cnt, AVG(ta.income) as avg_income, AVG(tb.order_amount) as avg_amount FROM demo.user_credit AS ta INNER JOIN demo.user_stats AS tb ON ta.id = tb.id WHERE ta.age >= 20 AND ta.age <= 30 AND tb.is_active = 1 GROUP BY ta.credit_rank"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=343.762921ms|
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:584d300b-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:6.462545ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column demo.user_stats.order_amount in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT tb.order_amount FROM demo.user_stats AS tb LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.567602ms|
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:585082ab-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.764152ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 2th column demo.user_stats.order_amount in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT ta.id, tb.order_amount FROM demo.user_credit AS ta INNER JOIN demo.user_stats AS tb ON ta.id = tb.id LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.867667ms|
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"Column#4.0" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"Column#4.0" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"avg_amount.1" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_amount"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,},],attr:[sql:select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;,table_refs:[bob.user_stats],],party:[bob,]}"]
1 [label="publish:{in:[In:{t_0,},],out:[Out:{t_1,},],attr:[],party:[bob,]}"]
0 -> 1 [label = "t_0:{Column#4:PRIVATE:FLOAT64}"]
}

2025-12-01 00:05:09.12112 INFO executor.go:149 |RequestID:|SessionID:5853b4f2-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:6.130031ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"5853b4f2-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"7334379984990513582"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"Column#4.0","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"Column#4.0","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"avg_amount.1","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"9bdf24a56c92101a192e6b85eac283b2d281fdef0734eb9a5dbefbd539fb6fde"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:05:09.12112 INFO executor.go:94 |RequestID:|SessionID:5853b4f2-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:6.528903ms|Reason:|ErrorMsg:|Request:
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:5853b4f2-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:12.609529ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT AVG(tb.order_amount) as avg_amount FROM demo.user_stats AS tb"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=12.682387ms|
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.age.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.2" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.3" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"alice.user_credit"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.age.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.2" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.3" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"age.4" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"age"} tensors:{name:"credit_rank.5" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"id.6" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"id"} tensors:{name:"income.7" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,t_3,},],attr:[sql:select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;,table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="publish:{in:[In:{t_0,t_1,t_2,t_3,},],out:[Out:{t_4,t_5,t_6,t_7,},],attr:[],party:[alice,]}"]
0 -> 1 [label = "t_0:{age:PRIVATE:INT64}"]
0 -> 1 [label = "t_1:{credit_rank:PRIVATE:INT64}"]
0 -> 1 [label = "t_2:{id:PRIVATE:STRING}"]
0 -> 1 [label = "t_3:{income:PRIVATE:INT64}"]
}

2025-12-01 00:05:09.12112 INFO executor.go:149 |RequestID:|SessionID:5859b9ae-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:5.091559ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="}],"job_id":"5859b9ae-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"8436919552441860232"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["alice.user_credit"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"age.4","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["age"]},{"name":"credit_rank.5","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"id.6","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["id"]},{"name":"income.7","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"1383e9cde0f7f858b38cab17be6540132eff5ffb7b42c0e0acd439fdae615387"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-01 00:05:09.12112 INFO executor.go:94 |RequestID:|SessionID:5859b9ae-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:5.445653ms|Reason:|ErrorMsg:|Request:
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:5859b9ae-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:11.246582ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT * FROM demo.user_credit LIMIT 5"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=11.303815ms|
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.id.0" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.is_active.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.2" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.id.0" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.is_active.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.2" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"id.3" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"id"} tensors:{name:"is_active.4" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"} tensors:{name:"order_amount.5" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;,table_refs:[bob.user_stats],],party:[bob,]}"]
1 [label="publish:{in:[In:{t_0,t_1,t_2,},],out:[Out:{t_3,t_4,t_5,},],attr:[],party:[bob,]}"]
0 -> 1 [label = "t_0:{id:PRIVATE:STRING}"]
0 -> 1 [label = "t_1:{is_active:PRIVATE:INT64}"]
0 -> 1 [label = "t_2:{order_amount:PRIVATE:FLOAT64}"]
}

2025-12-01 00:05:09.12112 INFO executor.go:149 |RequestID:|SessionID:585d8f78-ce06-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:2.279452ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"585d8f78-ce06-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"1908972350942329574"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"id.3","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["id"]},{"name":"is_active.4","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]},{"name":"order_amount.5","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"80579ef7ff72b888a41a6c3071f7c7eee9b03f0c40281198a9a0ec6409f7560e"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:05:09.12112 INFO executor.go:94 |RequestID:|SessionID:585d8f78-ce06-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:2.468948ms|Reason:|ErrorMsg:|Request:
2025-12-01 00:05:09.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:585d8f78-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:6.538355ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"SELECT * FROM demo.user_stats LIMIT 5"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.579937ms|
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:05:09.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:5860e798-ce06-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.836817ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column demo.user_credit.income in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party bob|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"SELECT ta.income FROM demo.user_credit AS ta LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:05:09.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.883637ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8333b2c-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:8.678515ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP DATABASE IF EXISTS demo"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=8.830681ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8366a96-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.312496ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP USER IF EXISTS alice"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.40314ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a838ca69-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.650037ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP USER IF EXISTS bob"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.715821ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a83af7a3-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.623774ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE DATABASE demo"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.706636ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a83ed817-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.646684ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER `alice` PARTY_CODE 'alice' IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.725725ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a841495e-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.085003ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER `bob` PARTY_CODE 'bob' IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.155824ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8439d25-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.783227ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT CREATE, GRANT OPTION, DROP ON demo.* TO alice"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.246836ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8461ae5-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.595295ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT CREATE, GRANT OPTION, DROP ON demo.* TO bob"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.686495ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8483db9-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.281767ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE demo.user_credit (id string, credit_rank int, income int, age int) REF_TABLE=alice.user_credit DB_TYPE='mysql'"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.364454ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a84a84fa-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.617043ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE TABLE demo.user_stats (id string, order_amount double, is_active int) REF_TABLE=bob.user_stats DB_TYPE='mysql'"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.673093ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a84c96b2-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.955649ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"ALTER USER alice WITH ENDPOINT 'localhost:8003'"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.053992ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a84f5675-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.007745ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"ALTER USER bob WITH ENDPOINT 'localhost:8004'"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.079169ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a851a005-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:6.705758ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(id, credit_rank, income, age) ON demo.user_credit TO alice"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.811639ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a854695b-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.490373ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_JOIN(id) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.576784ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8573f5e-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.855978ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_GROUP_BY(credit_rank) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.986197ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a859f885-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.428006ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_AGGREGATE(income) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.524702ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a85c7796-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.857829ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT_AFTER_COMPARE(age) ON demo.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.076174ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a85f21fa-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.730059ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(id, order_amount, is_active) ON demo.user_stats TO bob"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.876509ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a861a3af-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:8.069241ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_JOIN(id) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=8.223871ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8648629-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.831239ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_AGGREGATE(order_amount) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.961669ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8673809-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.645077ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT_AFTER_COMPARE(is_active) ON demo.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.720955ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a869c16a-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.593585ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS ON demo FOR alice"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.697746ms|
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a86caf2b-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.064653ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS ON demo FOR bob"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.178226ms|
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"alice.user_credit"}}}}} nodes:{key:"10" value:{node_name:"count.10" op_type:"ObliviousGroupCount" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"11" value:{node_name:"avg.11" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"12" value:{node_name:"avg.12" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"13" value:{node_name:"shuffle.13" op_type:"Shuffle" inputs:{key:"In" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"14" value:{node_name:"make_public.14" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"15" value:{node_name:"filter.15" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"16" value:{node_name:"make_constant.16" op_type:"Constant" outputs:{key:"Out" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} attributes:{key:"scalar" value:{t:{name:".0" elem_type:INT64 int64_data:4}}}}} nodes:{key:"17" value:{node_name:"broadcast.17" op_type:"BroadcastTo" inputs:{key:"In" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"ShapeRefTensor" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"18" value:{node_name:"make_private.18" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"19" value:{node_name:"make_private.19" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"20" value:{node_name:"GreaterEqual.20" op_type:"GreaterEqual" inputs:{key:"Left" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"21" value:{node_name:"make_public.21" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"22" value:{node_name:"apply_filter.22" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"23" value:{node_name:"make_private.23" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"24" value:{node_name:"make_private.24" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"25" value:{node_name:"make_private.25" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"26" value:{node_name:"make_private.26" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"27" value:{node_name:"publish.27" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"credit_rank.42" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"cnt.44" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"cnt"} tensors:{name:"avg_income.46" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_income"} tensors:{name:"avg_amount.48" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_amount"}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"demo.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"make_share.5" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}}}} nodes:{key:"6" value:{node_name:"make_share.6" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"7" value:{node_name:"make_share.7" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"8" value:{node_name:"sort.8" op_type:"Sort" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} attributes:{key:"reverse" value:{t:{name:".0" elem_type:BOOL bool_data:false}}}}} nodes:{key:"9" value:{node_name:"group_mark.9" op_type:"ObliviousGroupMark" inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"16"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"8"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"9"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"10"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"11"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"12"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"13"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"14"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"15"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"17"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"18"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"19"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"20"}} subdags:{jobs:{node_ids:"21"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"22"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"23"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"24"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"25"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"26"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"27"}}}}
2025-12-01 00:28:52.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.4" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"10" value:{node_name:"count.10" op_type:"ObliviousGroupCount" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"11" value:{node_name:"avg.11" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"12" value:{node_name:"avg.12" op_type:"ObliviousGroupAvg" inputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"13" value:{node_name:"shuffle.13" op_type:"Shuffle" inputs:{key:"In" value:{tensors:{name:"group_mark.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.19" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.20" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"14" value:{node_name:"make_public.14" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"group_mark.25" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"15" value:{node_name:"filter.15" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"group_mark.26" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"group_mark.21" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.22" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.23" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.24" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"16" value:{node_name:"make_constant.16" op_type:"Constant" outputs:{key:"Out" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} attributes:{key:"scalar" value:{t:{name:".0" elem_type:INT64 int64_data:4}}}}} nodes:{key:"17" value:{node_name:"broadcast.17" op_type:"BroadcastTo" inputs:{key:"In" value:{tensors:{name:"constant_data.31" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"ShapeRefTensor" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"18" value:{node_name:"make_private.18" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.33" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"19" value:{node_name:"make_private.19" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"constant_data.32" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"constant_data.34" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"demo.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"Right" value:{tensors:{name:"demo.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"demo.user_credit.id.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"21" value:{node_name:"make_public.21" op_type:"MakePublic" inputs:{key:"In" value:{tensors:{name:"GreaterEqual_out.35" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}}}} nodes:{key:"22" value:{node_name:"apply_filter.22" op_type:"Filter" inputs:{key:"Filter" value:{tensors:{name:"GreaterEqual_out.36" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_PUBLIC} ref_num:1}}} inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.30" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.27" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.28" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.29" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"23" value:{node_name:"make_private.23" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.37" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.41" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"24" value:{node_name:"make_private.24" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"group_mark.38" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"group_mark.43" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"25" value:{node_name:"make_private.25" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.39" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.45" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"26" value:{node_name:"make_private.26" op_type:"MakePrivate" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.40" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.47" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"reveal_to" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"demo.user_stats.order_amount.4" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"demo.user_stats.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"make_share.5" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}}}} nodes:{key:"6" value:{node_name:"make_share.6" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.income.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"7" value:{node_name:"make_share.7" op_type:"MakeShare" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.order_amount.9" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}}}} nodes:{key:"8" value:{node_name:"sort.8" op_type:"Sort" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3} tensors:{name:"demo.user_credit.income.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.12" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:3}}} outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.14" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_credit.income.15" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1} tensors:{name:"demo.user_stats.order_amount.16" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} attributes:{key:"reverse" value:{t:{name:".0" elem_type:BOOL bool_data:false}}}}} nodes:{key:"9" value:{node_name:"group_mark.9" op_type:"ObliviousGroupMark" inputs:{key:"Key" value:{tensors:{name:"demo.user_credit.credit_rank.13" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:1}}} outputs:{key:"Group" value:{tensors:{name:"group_mark.17" elem_type:BOOL option:REFERENCE annotation:{status:TENSORSTATUS_SECRET} ref_num:5}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"16"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"8"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"9"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"10"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"11"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"12"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"13"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"14"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"15"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"17"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"18"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"19"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"21"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"22"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"23"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"24"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"25"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"26"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);,table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,},],attr:[sql:select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;,table_refs:[bob.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_5,},RightJoinIndex:{t_6,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_2,},RowsIndexFilter:{t_5,},],out:[Out:{t_7,t_8,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,},RowsIndexFilter:{t_6,},],out:[Out:{t_9,},],attr:[],party:[bob,]}"]
5 [label="make_share:{in:[In:{t_7,},],out:[Out:{t_10,},],attr:[],party:[alice,bob,]}"]
6 [label="make_share:{in:[In:{t_8,},],out:[Out:{t_11,},],attr:[],party:[alice,bob,]}"]
7 [label="make_share:{in:[In:{t_9,},],out:[Out:{t_12,},],attr:[],party:[alice,bob,]}"]
8 [label="sort:{in:[In:{t_10,t_10,t_11,t_12,},Key:{t_10,},],out:[Out:{t_13,t_14,t_15,t_16,},],attr:[reverse:false,],party:[alice,bob,]}"]
9 [label="group_mark:{in:[Key:{t_13,},],out:[Group:{t_17,},],attr:[],party:[alice,bob,]}"]
10 [label="count:{in:[Group:{t_17,},In:{t_17,},],out:[Out:{t_18,},],attr:[],party:[alice,bob,]}"]
11 [label="avg:{in:[Group:{t_17,},In:{t_15,},],out:[Out:{t_19,},],attr:[],party:[alice,bob,]}"]
12 [label="avg:{in:[Group:{t_17,},In:{t_16,},],out:[Out:{t_20,},],attr:[],party:[alice,bob,]}"]
13 [label="shuffle:{in:[In:{t_18,t_19,t_20,t_14,t_17,},],out:[Out:{t_21,t_22,t_23,t_24,t_25,},],attr:[],party:[alice,bob,]}"]
14 [label="make_public:{in:[In:{t_25,},],out:[Out:{t_26,},],attr:[],party:[alice,bob,]}"]
15 [label="filter:{in:[Filter:{t_26,},In:{t_21,t_22,t_23,t_24,},],out:[Out:{t_27,t_28,t_29,t_30,},],attr:[],party:[alice,bob,]}"]
16 [label="make_constant:{in:[],out:[Out:{t_31,},],attr:[scalar:4,],party:[alice,bob,]}"]
17 [label="broadcast:{in:[In:{t_31,},ShapeRefTensor:{t_27,},],out:[Out:{t_32,},],attr:[],party:[alice,bob,]}"]
18 [label="make_private:{in:[In:{t_27,},],out:[Out:{t_33,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
19 [label="make_private:{in:[In:{t_32,},],out:[Out:{t_34,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
20 [label="GreaterEqual:{in:[Left:{t_33,},Right:{t_34,},],out:[Out:{t_35,},],attr:[],party:[alice,]}"]
21 [label="make_public:{in:[In:{t_35,},],out:[Out:{t_36,},],attr:[],party:[alice,bob,]}"]
22 [label="apply_filter:{in:[Filter:{t_36,},In:{t_30,t_27,t_28,t_29,},],out:[Out:{t_37,t_38,t_39,t_40,},],attr:[],party:[alice,bob,]}"]
23 [label="make_private:{in:[In:{t_37,},],out:[Out:{t_41,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
24 [label="make_private:{in:[In:{t_38,},],out:[Out:{t_43,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
25 [label="make_private:{in:[In:{t_39,},],out:[Out:{t_45,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
26 [label="make_private:{in:[In:{t_40,},],out:[Out:{t_47,},],attr:[reveal_to:alice,],party:[alice,bob,]}"]
27 [label="publish:{in:[In:{t_41,t_43,t_45,t_47,},],out:[Out:{t_42,t_44,t_46,t_48,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{order_amount:PRIVATE:FLOAT64}"]
10 -> 13 [label = "t_18:{group_mark:SECRET:INT64}"]
11 -> 13 [label = "t_19:{income:SECRET:FLOAT64}"]
12 -> 13 [label = "t_20:{order_amount:SECRET:FLOAT64}"]
13 -> 14 [label = "t_25:{group_mark:SECRET:BOOL}"]
13 -> 15 [label = "t_21:{group_mark:SECRET:INT64}"]
13 -> 15 [label = "t_22:{income:SECRET:FLOAT64}"]
13 -> 15 [label = "t_23:{order_amount:SECRET:FLOAT64}"]
13 -> 15 [label = "t_24:{credit_rank:SECRET:INT64}"]
14 -> 15 [label = "t_26:{group_mark:PUBLIC:BOOL}"]
15 -> 17 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 18 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 22 [label = "t_27:{group_mark:SECRET:INT64}"]
15 -> 22 [label = "t_28:{income:SECRET:FLOAT64}"]
15 -> 22 [label = "t_29:{order_amount:SECRET:FLOAT64}"]
15 -> 22 [label = "t_30:{credit_rank:SECRET:INT64}"]
16 -> 17 [label = "t_31:{constant_data:PUBLIC:INT64}"]
17 -> 19 [label = "t_32:{constant_data:PUBLIC:INT64}"]
18 -> 20 [label = "t_33:{group_mark:PRIVATE:INT64}"]
19 -> 20 [label = "t_34:{constant_data:PRIVATE:INT64}"]
2 -> 3 [label = "t_5:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_6:{id:PRIVATE:INT64}"]
20 -> 21 [label = "t_35:{GreaterEqual_out:PRIVATE:BOOL}"]
21 -> 22 [label = "t_36:{GreaterEqual_out:PUBLIC:BOOL}"]
22 -> 23 [label = "t_37:{credit_rank:SECRET:INT64}"]
22 -> 24 [label = "t_38:{group_mark:SECRET:INT64}"]
22 -> 25 [label = "t_39:{income:SECRET:FLOAT64}"]
22 -> 26 [label = "t_40:{order_amount:SECRET:FLOAT64}"]
23 -> 27 [label = "t_41:{credit_rank:PRIVATE:INT64}"]
24 -> 27 [label = "t_43:{group_mark:PRIVATE:INT64}"]
25 -> 27 [label = "t_45:{income:PRIVATE:FLOAT64}"]
26 -> 27 [label = "t_47:{order_amount:PRIVATE:FLOAT64}"]
3 -> 5 [label = "t_7:{credit_rank:PRIVATE:INT64}"]
3 -> 6 [label = "t_8:{income:PRIVATE:INT64}"]
4 -> 7 [label = "t_9:{order_amount:PRIVATE:FLOAT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
5 -> 8 [label = "t_10:{credit_rank:SECRET:INT64}"]
6 -> 8 [label = "t_11:{income:SECRET:INT64}"]
7 -> 8 [label = "t_12:{order_amount:SECRET:FLOAT64}"]
8 -> 11 [label = "t_15:{income:SECRET:INT64}"]
8 -> 12 [label = "t_16:{order_amount:SECRET:FLOAT64}"]
8 -> 13 [label = "t_14:{credit_rank:SECRET:INT64}"]
8 -> 9 [label = "t_13:{credit_rank:SECRET:INT64}"]
9 -> 10 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 10 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 11 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 12 [label = "t_17:{group_mark:SECRET:BOOL}"]
9 -> 13 [label = "t_17:{group_mark:SECRET:BOOL}"]
}

2025-12-01 00:28:52.12112 INFO executor.go:149 |RequestID:|SessionID:a86f2654-ce09-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:224.774789ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"a86f2654-ce09-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"6543885477529160071"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.4","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":"INT64","int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_stats.order_amount.4","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":"BOOL","bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"90330ea562051d19e7958091a4915e99b59a2b889844d92326aebef98ece9642"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:28:52.12112 INFO executor.go:149 |RequestID:|SessionID:a86f2654-ce09-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:225.408624ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"a86f2654-ce09-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"6543885477529160071"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age>=20) and (ta.age<=30);"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["alice.user_credit"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":"INT64","int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"20":{"node_name":"GreaterEqual.20","op_type":"GreaterEqual","inputs":{"Left":{"tensors":[{"name":"group_mark.33","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"Right":{"tensors":[{"name":"constant_data.34","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PUBLIC"},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.27","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"27":{"node_name":"publish.27","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"group_mark.43","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.45","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.47","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"credit_rank.42","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"cnt.44","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["cnt"]},{"name":"avg_income.46","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_income"]},{"name":"avg_amount.48","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_amount"]}]}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":"BOOL","bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":"BOOL","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_SECRET"},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["20"]}]},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["27"]}]}]}]},"sub_graph_checksum":"56b793de1735b6977a6ead18fa9a7b67ccb1634b1716e2a3a73dfd8d8ec9efff"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-01 00:28:52.12112 INFO executor.go:94 |RequestID:|SessionID:a86f2654-ce09-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:227.27937ms|Reason:|ErrorMsg:|Request:
2025-12-01 00:28:52.12112 INFO session.go:136 for safety, we filter the results for groups which contain less than 4 items.
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a86f2654-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:239.118631ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT ta.credit_rank, COUNT(*) as cnt, AVG(ta.income) as avg_income, AVG(tb.order_amount) as avg_amount FROM demo.user_credit AS ta INNER JOIN demo.user_stats AS tb ON ta.id = tb.id WHERE ta.age >= 20 AND ta.age <= 30 AND tb.is_active = 1 GROUP BY ta.credit_rank"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=239.159754ms|
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:a897253c-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.728689ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column demo.user_stats.order_amount in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT tb.order_amount FROM demo.user_stats AS tb LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.776232ms|
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:a89a11ac-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.584675ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 2th column demo.user_stats.order_amount in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT ta.id, tb.order_amount FROM demo.user_credit AS ta INNER JOIN demo.user_stats AS tb ON ta.id = tb.id LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.618941ms|
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"Column#4.0" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"Column#4.0" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"avg_amount.1" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"avg_amount"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,},],attr:[sql:select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;,table_refs:[bob.user_stats],],party:[bob,]}"]
1 [label="publish:{in:[In:{t_0,},],out:[Out:{t_1,},],attr:[],party:[bob,]}"]
0 -> 1 [label = "t_0:{Column#4:PRIVATE:FLOAT64}"]
}

2025-12-01 00:28:52.12112 INFO executor.go:149 |RequestID:|SessionID:a89ce8b9-ce09-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:3.004575ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"a89ce8b9-ce09-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"736809822324047528"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"Column#4.0","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"Column#4.0","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"avg_amount.1","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["avg_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"9bdf24a56c92101a192e6b85eac283b2d281fdef0734eb9a5dbefbd539fb6fde"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:28:52.12112 INFO executor.go:94 |RequestID:|SessionID:a89ce8b9-ce09-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:3.159369ms|Reason:|ErrorMsg:|Request:
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a89ce8b9-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:6.333985ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT AVG(tb.order_amount) as avg_amount FROM demo.user_stats AS tb"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.368644ms|
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_credit.age.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.2" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.3" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"alice.user_credit"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_credit.age.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.credit_rank.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.id.2" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_credit.income.3" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"age.4" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"age"} tensors:{name:"credit_rank.5" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"id.6" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"id"} tensors:{name:"income.7" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,t_3,},],attr:[sql:select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;,table_refs:[alice.user_credit],],party:[alice,]}"]
1 [label="publish:{in:[In:{t_0,t_1,t_2,t_3,},],out:[Out:{t_4,t_5,t_6,t_7,},],attr:[],party:[alice,]}"]
0 -> 1 [label = "t_0:{age:PRIVATE:INT64}"]
0 -> 1 [label = "t_1:{credit_rank:PRIVATE:INT64}"]
0 -> 1 [label = "t_2:{id:PRIVATE:STRING}"]
0 -> 1 [label = "t_3:{income:PRIVATE:INT64}"]
}

2025-12-01 00:28:52.12112 INFO executor.go:149 |RequestID:|SessionID:a8a03f73-ce09-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:2.737182ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="}],"job_id":"a8a03f73-ce09-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"988640665833906895"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["alice.user_credit"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"age.4","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["age"]},{"name":"credit_rank.5","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"id.6","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["id"]},{"name":"income.7","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"1383e9cde0f7f858b38cab17be6540132eff5ffb7b42c0e0acd439fdae615387"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-01 00:28:52.12112 INFO executor.go:94 |RequestID:|SessionID:a8a03f73-ce09-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:2.92507ms|Reason:|ErrorMsg:|Request:
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8a03f73-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:6.117598ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT * FROM demo.user_credit LIMIT 5"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.156041ms|
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 INFO interpreter.go:241 subgraph of bob: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"demo.user_stats.id.0" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.is_active.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.2" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"bob.user_stats"}}}}} nodes:{key:"1" value:{node_name:"publish.1" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"demo.user_stats.id.0" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.is_active.1" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"demo.user_stats.order_amount.2" elem_type:FLOAT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"id.3" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"id"} tensors:{name:"is_active.4" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"} tensors:{name:"order_amount.5" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{jobs:{node_ids:"1"}}}}
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;,table_refs:[bob.user_stats],],party:[bob,]}"]
1 [label="publish:{in:[In:{t_0,t_1,t_2,},],out:[Out:{t_3,t_4,t_5,},],attr:[],party:[bob,]}"]
0 -> 1 [label = "t_0:{id:PRIVATE:STRING}"]
0 -> 1 [label = "t_1:{is_active:PRIVATE:INT64}"]
0 -> 1 [label = "t_2:{order_amount:PRIVATE:FLOAT64}"]
}

2025-12-01 00:28:52.12112 INFO executor.go:149 |RequestID:|SessionID:a8a38a63-ce09-11f0-91a2-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:2.609686ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"a8a38a63-ce09-11f0-91a2-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"6026585132637146106"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":"FLOAT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"id.3","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["id"]},{"name":"is_active.4","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]},{"name":"order_amount.5","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"80579ef7ff72b888a41a6c3071f7c7eee9b03f0c40281198a9a0ec6409f7560e"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-01 00:28:52.12112 INFO executor.go:94 |RequestID:|SessionID:a8a38a63-ce09-11f0-91a2-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:2.778817ms|Reason:|ErrorMsg:|Request:
2025-12-01 00:28:52.12112 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:a8a38a63-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.746214ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"SELECT * FROM demo.user_stats LIMIT 5"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.776173ms|
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-01 00:28:52.12112 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:a8a7d001-ce09-11f0-91a2-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.042587ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column demo.user_credit.income in the result is not visibile (PLAINTEXT_AFTER_AGGREGATE) to party bob|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"SELECT ta.income FROM demo.user_credit AS ta LIMIT 10"|ClientIP:127.0.0.1
2025-12-01 00:28:52.12112 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.086188ms|
