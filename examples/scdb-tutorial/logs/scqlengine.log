2025-11-30 22:24:34.772 [info] [main.cc:main:312] [scqlengine] Engine version: 0.9.5dev.20251130-21:40:26.5de28ec
2025-11-30 22:24:34.772 [info] [main.cc:main:312] [scqlengine] Engine version: 0.9.5dev.20251130-21:40:26.5de28ec
2025-11-30 22:24:34.773 [info] [main.cc:BuildRouter:117] [scqlengine] Building EmbedRouter from json conf
2025-11-30 22:24:34.774 [info] [main.cc:BuildRouter:117] [scqlengine] Building EmbedRouter from json conf
2025-11-30 22:24:34.774 [info] [session_manager.cc:WatchSessionTimeoutThread:275] [scqlengine] WatchSessionTimeoutThread startup, session default timeout=1800s
2025-11-30 22:24:34.775 [info] [session_manager.cc:WatchSessionTimeoutThread:275] [scqlengine] WatchSessionTimeoutThread startup, session default timeout=1800s
2025-11-30 22:24:34.775 [info] [thread_pool.cc:ThreadPool:30] [scqlengine] Create a fixed thread pool with size 192
2025-11-30 22:24:34.776 [info] [thread_pool.cc:ThreadPool:30] [scqlengine] Create a fixed thread pool with size 192
2025-11-30 22:24:34.783 [info] [main.cc:main:342] [scqlengine] Adding EngineService into brpc server
2025-11-30 22:24:34.783 [info] [main.cc:main:352] [scqlengine] Adding MetricsService into brpc server
2025-11-30 22:24:34.783 [info] [main.cc:main:365] [scqlengine] Adding MuxReceiverService into main server...
2025-11-30 22:24:34.783 [info] [main.cc:main:370] [scqlengine] Adding ErrorCollectorService into main server...
2025-11-30 22:24:34.783 [info] [main.cc:main:342] [scqlengine] Adding EngineService into brpc server
2025-11-30 22:24:34.784 [info] [main.cc:main:352] [scqlengine] Adding MetricsService into brpc server
2025-11-30 22:24:34.784 [info] [main.cc:main:365] [scqlengine] Adding MuxReceiverService into main server...
2025-11-30 22:24:34.784 [info] [main.cc:main:370] [scqlengine] Adding ErrorCollectorService into main server...
2025-11-30 22:24:34.792 [warning] [server.cpp:BRPC:1248] [scqlengine] Builtin services are disabled according to ServerOptions.has_builtin_services
2025-11-30 22:24:34.792 [info] [main.cc:main:395] [scqlengine] Started engine rpc server success, listen on: 0.0.0.0:8004
2025-11-30 22:24:34.792 [warning] [controller.cpp:BRPC:1618] [scqlengine] SIGTERM was installed with 1
2025-11-30 22:24:34.793 [warning] [server.cpp:BRPC:1248] [scqlengine] Builtin services are disabled according to ServerOptions.has_builtin_services
2025-11-30 22:24:34.793 [info] [main.cc:main:395] [scqlengine] Started engine rpc server success, listen on: 0.0.0.0:8003
2025-11-30 22:24:34.793 [warning] [controller.cpp:BRPC:1618] [scqlengine] SIGTERM was installed with 1
2025-12-01 00:02:56.423 [info] [session_manager.cc:CreateSession:131] [scqlengine] create session(08f693c7-ce06-11f0-bca6-0242ac110007) succ, cost(3ms), current running session=1
2025-12-01 00:02:56.423 [info] [engine_service_impl.cc:CheckGraphChecksum:177] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] skip checking graph checksum
2025-12-01 00:02:56.423 [info] [session_manager.cc:CreateSession:131] [scqlengine] create session(08f693c7-ce06-11f0-bca6-0242ac110007) succ, cost(4ms), current running session=1
2025-12-01 00:02:56.423 [info] [engine_service_impl.cc:CheckGraphChecksum:177] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] skip checking graph checksum
2025-12-01 00:02:56.423 [info] [engine_service_impl.cc:RunExecutionPlan:283] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] [RunExecutionPlan] Session created successfully, start to run plan, client = 127.0.0.1:57910
RunExecutionPlanRequest = {"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"08f693c7-ce06-11f0-bca6-0242ac110007","spu_runtime_cfg":{"protocol":2,"field":2,"public_random_seed":"4340971043661231964"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_stats.order_amount.4","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":8,"string_data":["select tb.id,tb.order_amount from bob.user_stats as tb where tb.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":8,"string_data":["bob.user_stats"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"group_mark.25","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":7,"option":1,"annotation":{"status":4},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":7,"option":1,"annotation":{"status":4},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":4,"option":1,"annotation":{"status":4},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":4,"int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":4,"option":1,"annotation":{"status":4},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":4,"option":1,"annotation":{"status":4},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":4,"option":1,"annotation":{"status":4},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":8,"string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":4,"int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":4,"int64_data":["0"]}}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":7,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":7,"option":1,"annotation":{"status":4},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":7,"option":1,"annotation":{"status":4},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"group_mark.27","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"group_mark.38","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_stats.order_amount.4","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":7,"bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"90330ea562051d19e7958091a4915e99b59a2b889844d92326aebef98ece9642"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}
2025-12-01 00:02:56.423 [info] [engine_service_impl.cc:RunPlanCore:476] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] session(08f693c7-ce06-11f0-bca6-0242ac110007) start to execute pipeline(0) batch(0)
2025-12-01 00:02:56.423 [info] [engine_service_impl.cc:RunPlanCore:488] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] session(08f693c7-ce06-11f0-bca6-0242ac110007) start to execute node(runsql.1) op(RunSQL) pipeline(0) batch(0)
2025-12-01 00:02:56.424 [info] [engine_service_impl.cc:RunExecutionPlan:283] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] [RunExecutionPlan] Session created successfully, start to run plan, client = 127.0.0.1:50246
RunExecutionPlanRequest = {"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="},{"code":"bob","name":"bob","host":"localhost:8004","rank":1,"public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"08f693c7-ce06-11f0-bca6-0242ac110007","spu_runtime_cfg":{"protocol":2,"field":2,"public_random_seed":"4340971043661231964"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.id.1","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":8,"string_data":["select ta.credit_rank,ta.id,ta.income from alice.user_credit as ta where (ta.age\u003e=20) and (ta.age\u003c=30);"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":8,"string_data":["alice.user_credit"]}}}},"10":{"node_name":"count.10","op_type":"ObliviousGroupCount","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]},"In":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.18","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"11":{"node_name":"avg.11","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_credit.income.15","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.19","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"12":{"node_name":"avg.12","op_type":"ObliviousGroupAvg","inputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]},"In":{"tensors":[{"name":"demo.user_stats.order_amount.16","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.20","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"13":{"node_name":"shuffle.13","op_type":"Shuffle","inputs":{"In":{"tensors":[{"name":"group_mark.18","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.19","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.20","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.21","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"group_mark.25","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"14":{"node_name":"make_public.14","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"group_mark.25","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.26","elem_type":7,"option":1,"annotation":{"status":4},"ref_num":1}]}}},"15":{"node_name":"filter.15","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"group_mark.26","elem_type":7,"option":1,"annotation":{"status":4},"ref_num":1}]},"In":{"tensors":[{"name":"group_mark.21","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.22","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.23","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.24","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.27","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.30","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"16":{"node_name":"make_constant.16","op_type":"Constant","outputs":{"Out":{"tensors":[{"name":"constant_data.31","elem_type":4,"option":1,"annotation":{"status":4},"ref_num":1}]}},"attributes":{"scalar":{"t":{"name":".0","elem_type":4,"int64_data":["4"]}}}},"17":{"node_name":"broadcast.17","op_type":"BroadcastTo","inputs":{"In":{"tensors":[{"name":"constant_data.31","elem_type":4,"option":1,"annotation":{"status":4},"ref_num":1}]},"ShapeRefTensor":{"tensors":[{"name":"group_mark.27","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.32","elem_type":4,"option":1,"annotation":{"status":4},"ref_num":1}]}}},"18":{"node_name":"make_private.18","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.27","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.33","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"19":{"node_name":"make_private.19","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"constant_data.32","elem_type":4,"option":1,"annotation":{"status":4},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"constant_data.34","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"demo.user_credit.id.1","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1}]},"Right":{"tensors":[{"name":"demo.user_stats.id.3","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"demo.user_stats.id.6","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":8,"string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":4,"int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":4,"int64_data":["0"]}}}},"20":{"node_name":"GreaterEqual.20","op_type":"GreaterEqual","inputs":{"Left":{"tensors":[{"name":"group_mark.33","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]},"Right":{"tensors":[{"name":"constant_data.34","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":7,"option":1,"annotation":{"status":1},"ref_num":1}]}}},"21":{"node_name":"make_public.21","op_type":"MakePublic","inputs":{"In":{"tensors":[{"name":"GreaterEqual_out.35","elem_type":7,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":7,"option":1,"annotation":{"status":4},"ref_num":1}]}}},"22":{"node_name":"apply_filter.22","op_type":"Filter","inputs":{"Filter":{"tensors":[{"name":"GreaterEqual_out.36","elem_type":7,"option":1,"annotation":{"status":4},"ref_num":1}]},"In":{"tensors":[{"name":"demo.user_credit.credit_rank.30","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"group_mark.27","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3},{"name":"demo.user_credit.income.28","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.29","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"group_mark.38","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.39","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.40","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"23":{"node_name":"make_private.23","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.37","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"24":{"node_name":"make_private.24","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"group_mark.38","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"group_mark.43","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"25":{"node_name":"make_private.25","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.39","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.45","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"26":{"node_name":"make_private.26","op_type":"MakePrivate","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.40","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.47","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"reveal_to":{"t":{"name":".0","elem_type":8,"string_data":["alice"]}}}},"27":{"node_name":"publish.27","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.41","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"group_mark.43","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.income.45","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_stats.order_amount.47","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"credit_rank.42","elem_type":8,"annotation":{"status":1},"string_data":["credit_rank"]},{"name":"cnt.44","elem_type":8,"annotation":{"status":1},"string_data":["cnt"]},{"name":"avg_income.46","elem_type":8,"annotation":{"status":1},"string_data":["avg_income"]},{"name":"avg_amount.48","elem_type":8,"annotation":{"status":1},"string_data":["avg_amount"]}]}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"demo.user_credit.credit_rank.0","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.income.2","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"demo.user_credit.id.5","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.income.8","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}}},"5":{"node_name":"make_share.5","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.7","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3}]}}},"6":{"node_name":"make_share.6","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_credit.income.8","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.income.11","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"7":{"node_name":"make_share.7","op_type":"MakeShare","inputs":{"In":{"tensors":[{"name":"demo.user_stats.order_amount.9","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_stats.order_amount.12","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}}},"8":{"node_name":"sort.8","op_type":"Sort","inputs":{"In":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3},{"name":"demo.user_credit.credit_rank.10","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3},{"name":"demo.user_credit.income.11","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.12","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]},"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.10","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":3}]}},"outputs":{"Out":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.credit_rank.14","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_credit.income.15","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1},{"name":"demo.user_stats.order_amount.16","elem_type":6,"option":1,"annotation":{"status":2},"ref_num":1}]}},"attributes":{"reverse":{"t":{"name":".0","elem_type":7,"bool_data":[false]}}}},"9":{"node_name":"group_mark.9","op_type":"ObliviousGroupMark","inputs":{"Key":{"tensors":[{"name":"demo.user_credit.credit_rank.13","elem_type":4,"option":1,"annotation":{"status":2},"ref_num":1}]}},"outputs":{"Group":{"tensors":[{"name":"group_mark.17","elem_type":7,"option":1,"annotation":{"status":2},"ref_num":5}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["16"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["8"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["9"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["10"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["11"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["12"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["13"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["14"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["15"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["17"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["18"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["19"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["20"]}]},{"jobs":[{"node_ids":["21"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["22"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["23"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["24"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["25"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["26"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["27"]}]}]}]},"sub_graph_checksum":"56b793de1735b6977a6ead18fa9a7b67ccb1634b1716e2a3a73dfd8d8ec9efff"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}
2025-12-01 00:02:56.424 [info] [engine_service_impl.cc:RunPlanCore:476] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] session(08f693c7-ce06-11f0-bca6-0242ac110007) start to execute pipeline(0) batch(0)
2025-12-01 00:02:56.424 [info] [engine_service_impl.cc:RunPlanCore:488] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] session(08f693c7-ce06-11f0-bca6-0242ac110007) start to execute node(runsql.0) op(RunSQL) pipeline(0) batch(0)
2025-12-01 00:02:56.434 [error] [engine_service_impl.cc:RunPlanSync:589] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] RunExecutionPlan run jobs(08f693c7-ce06-11f0-bca6-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)
2025-12-01 00:02:56.434 [warning] [session_manager.cc:CompareAndSetState:264] [scqlengine] session(08f693c7-ce06-11f0-bca6-0242ac110007), failed to transition state from COMPUTATION_FINISHED to SUCCEEDED. Current state was not the expected one.
2025-12-01 00:02:56.434 [info] [session_manager.cc:RemoveSession:217] [scqlengine] session(08f693c7-ce06-11f0-bca6-0242ac110007) removed, running_cost(15ms), current running session=0
2025-12-01 00:02:56.435 [warning] [channel.h:~Channel:163] [scqlengine] Channel destructor is called before WaitLinkTaskFinish, try stop send thread
2025-12-01 00:02:56.438 [error] [engine_service_impl.cc:RunPlanSync:589] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] RunExecutionPlan run jobs(08f693c7-ce06-11f0-bca6-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)
2025-12-01 00:02:56.438 [warning] [session_manager.cc:GetSession:145] [scqlengine] session(08f693c7-ce06-11f0-bca6-0242ac110007) not exists. default return nullptr.
2025-12-01 00:02:56.438 [warning] [engine_service_impl.cc:ReportErrorToPeers:672] [job(08f693c7-ce06-11f0-bca6-0242ac110007)] sync error to peer=(bob,localhost:8004) failed: status: code: 141
message: "no session for job_id=08f693c7-ce06-11f0-bca6-0242ac110007"

2025-12-01 00:02:56.438 [warning] [session_manager.cc:CompareAndSetState:264] [scqlengine] session(08f693c7-ce06-11f0-bca6-0242ac110007), failed to transition state from COMPUTATION_FINISHED to SUCCEEDED. Current state was not the expected one.
2025-12-01 00:02:56.439 [info] [session_manager.cc:RemoveSession:217] [scqlengine] session(08f693c7-ce06-11f0-bca6-0242ac110007) removed, running_cost(19ms), current running session=0
2025-12-01 00:02:56.439 [warning] [channel.h:~Channel:163] [scqlengine] Channel destructor is called before WaitLinkTaskFinish, try stop send thread
2025-12-01 00:02:56.491 [info] [session_manager.cc:CreateSession:131] [scqlengine] create session(09042502-ce06-11f0-bca6-0242ac110007) succ, cost(0ms), current running session=1
2025-12-01 00:02:56.491 [info] [engine_service_impl.cc:CheckGraphChecksum:177] [job(09042502-ce06-11f0-bca6-0242ac110007)] skip checking graph checksum
2025-12-01 00:02:56.491 [info] [engine_service_impl.cc:RunExecutionPlan:283] [job(09042502-ce06-11f0-bca6-0242ac110007)] [RunExecutionPlan] Session created successfully, start to run plan, client = 127.0.0.1:57934
RunExecutionPlanRequest = {"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"09042502-ce06-11f0-bca6-0242ac110007","spu_runtime_cfg":{"protocol":2,"field":2,"public_random_seed":"4334743211116841903"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"Column#4.0","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":8,"string_data":["select avg(tb.order_amount) as avg_amount from bob.user_stats as tb;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":8,"string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"Column#4.0","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"avg_amount.1","elem_type":8,"annotation":{"status":1},"string_data":["avg_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"9bdf24a56c92101a192e6b85eac283b2d281fdef0734eb9a5dbefbd539fb6fde"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}
2025-12-01 00:02:56.491 [info] [engine_service_impl.cc:RunPlanCore:476] [job(09042502-ce06-11f0-bca6-0242ac110007)] session(09042502-ce06-11f0-bca6-0242ac110007) start to execute pipeline(0) batch(0)
2025-12-01 00:02:56.491 [info] [engine_service_impl.cc:RunPlanCore:488] [job(09042502-ce06-11f0-bca6-0242ac110007)] session(09042502-ce06-11f0-bca6-0242ac110007) start to execute node(runsql.0) op(RunSQL) pipeline(0) batch(0)
2025-12-01 00:02:56.491 [error] [engine_service_impl.cc:RunPlanSync:589] [job(09042502-ce06-11f0-bca6-0242ac110007)] RunExecutionPlan run jobs(09042502-ce06-11f0-bca6-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)
2025-12-01 00:02:56.491 [warning] [session_manager.cc:CompareAndSetState:264] [scqlengine] session(09042502-ce06-11f0-bca6-0242ac110007), failed to transition state from COMPUTATION_FINISHED to SUCCEEDED. Current state was not the expected one.
2025-12-01 00:02:56.491 [info] [session_manager.cc:RemoveSession:217] [scqlengine] session(09042502-ce06-11f0-bca6-0242ac110007) removed, running_cost(0ms), current running session=0
2025-12-01 00:02:56.511 [info] [session_manager.cc:CreateSession:131] [scqlengine] create session(09070430-ce06-11f0-bca6-0242ac110007) succ, cost(0ms), current running session=1
2025-12-01 00:02:56.511 [info] [engine_service_impl.cc:CheckGraphChecksum:177] [job(09070430-ce06-11f0-bca6-0242ac110007)] skip checking graph checksum
2025-12-01 00:02:56.511 [info] [engine_service_impl.cc:RunExecutionPlan:283] [job(09070430-ce06-11f0-bca6-0242ac110007)] [RunExecutionPlan] Session created successfully, start to run plan, client = 127.0.0.1:50258
RunExecutionPlanRequest = {"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003","public_key":"MCowBQYDK2VwAyEAocQ8CID0RXLpbkHhS56TuGdkMJpVMLGB6q9xwWtCIIo="}],"job_id":"09070430-ce06-11f0-bca6-0242ac110007","spu_runtime_cfg":{"protocol":2,"field":2,"public_random_seed":"8449786473283773285"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":8,"string_data":["select user_credit.age,user_credit.credit_rank,user_credit.id,user_credit.income from alice.user_credit limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":8,"string_data":["alice.user_credit"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_credit.age.0","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.credit_rank.1","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.id.2","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_credit.income.3","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"age.4","elem_type":8,"annotation":{"status":1},"string_data":["age"]},{"name":"credit_rank.5","elem_type":8,"annotation":{"status":1},"string_data":["credit_rank"]},{"name":"id.6","elem_type":8,"annotation":{"status":1},"string_data":["id"]},{"name":"income.7","elem_type":8,"annotation":{"status":1},"string_data":["income"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"1383e9cde0f7f858b38cab17be6540132eff5ffb7b42c0e0acd439fdae615387"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}
2025-12-01 00:02:56.511 [info] [engine_service_impl.cc:RunPlanCore:476] [job(09070430-ce06-11f0-bca6-0242ac110007)] session(09070430-ce06-11f0-bca6-0242ac110007) start to execute pipeline(0) batch(0)
2025-12-01 00:02:56.511 [info] [engine_service_impl.cc:RunPlanCore:488] [job(09070430-ce06-11f0-bca6-0242ac110007)] session(09070430-ce06-11f0-bca6-0242ac110007) start to execute node(runsql.0) op(RunSQL) pipeline(0) batch(0)
2025-12-01 00:02:56.511 [error] [engine_service_impl.cc:RunPlanSync:589] [job(09070430-ce06-11f0-bca6-0242ac110007)] RunExecutionPlan run jobs(09070430-ce06-11f0-bca6-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)
2025-12-01 00:02:56.511 [warning] [session_manager.cc:CompareAndSetState:264] [scqlengine] session(09070430-ce06-11f0-bca6-0242ac110007), failed to transition state from COMPUTATION_FINISHED to SUCCEEDED. Current state was not the expected one.
2025-12-01 00:02:56.511 [info] [session_manager.cc:RemoveSession:217] [scqlengine] session(09070430-ce06-11f0-bca6-0242ac110007) removed, running_cost(0ms), current running session=0
2025-12-01 00:02:56.534 [info] [session_manager.cc:CreateSession:131] [scqlengine] create session(090a0b6d-ce06-11f0-bca6-0242ac110007) succ, cost(0ms), current running session=1
2025-12-01 00:02:56.534 [info] [engine_service_impl.cc:CheckGraphChecksum:177] [job(090a0b6d-ce06-11f0-bca6-0242ac110007)] skip checking graph checksum
2025-12-01 00:02:56.534 [info] [engine_service_impl.cc:RunExecutionPlan:283] [job(090a0b6d-ce06-11f0-bca6-0242ac110007)] [RunExecutionPlan] Session created successfully, start to run plan, client = 127.0.0.1:57950
RunExecutionPlanRequest = {"job_params":{"party_code":"bob","parties":[{"code":"bob","name":"bob","host":"localhost:8004","public_key":"MCowBQYDK2VwAyEAeKWKsxJVF5cvfB693Jb/HI1CCJA6WZyVeS6ErCLlj4w="}],"job_id":"090a0b6d-ce06-11f0-bca6-0242ac110007","spu_runtime_cfg":{"protocol":2,"field":2,"public_random_seed":"1970073133997163560"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":8,"string_data":["select user_stats.id,user_stats.is_active,user_stats.order_amount from bob.user_stats limit 5;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":8,"string_data":["bob.user_stats"]}}}},"1":{"node_name":"publish.1","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"demo.user_stats.id.0","elem_type":8,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_stats.is_active.1","elem_type":4,"option":1,"annotation":{"status":1},"ref_num":1},{"name":"demo.user_stats.order_amount.2","elem_type":6,"option":1,"annotation":{"status":1},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"id.3","elem_type":8,"annotation":{"status":1},"string_data":["id"]},{"name":"is_active.4","elem_type":8,"annotation":{"status":1},"string_data":["is_active"]},{"name":"order_amount.5","elem_type":8,"annotation":{"status":1},"string_data":["order_amount"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{"jobs":[{"node_ids":["1"]}]}]}]},"sub_graph_checksum":"80579ef7ff72b888a41a6c3071f7c7eee9b03f0c40281198a9a0ec6409f7560e"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}
2025-12-01 00:02:56.534 [info] [engine_service_impl.cc:RunPlanCore:476] [job(090a0b6d-ce06-11f0-bca6-0242ac110007)] session(090a0b6d-ce06-11f0-bca6-0242ac110007) start to execute pipeline(0) batch(0)
2025-12-01 00:02:56.534 [info] [engine_service_impl.cc:RunPlanCore:488] [job(090a0b6d-ce06-11f0-bca6-0242ac110007)] session(090a0b6d-ce06-11f0-bca6-0242ac110007) start to execute node(runsql.0) op(RunSQL) pipeline(0) batch(0)
2025-12-01 00:02:56.535 [error] [engine_service_impl.cc:RunPlanSync:589] [job(090a0b6d-ce06-11f0-bca6-0242ac110007)] RunExecutionPlan run jobs(090a0b6d-ce06-11f0-bca6-0242ac110007) failed, catch std::exception=[engine/datasource/odbc_connector.cc:99] create session catch unexpected Poco::Data::DataException: Connection attempt failed: Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)
2025-12-01 00:02:56.535 [warning] [session_manager.cc:CompareAndSetState:264] [scqlengine] session(090a0b6d-ce06-11f0-bca6-0242ac110007), failed to transition state from COMPUTATION_FINISHED to SUCCEEDED. Current state was not the expected one.
2025-12-01 00:02:56.535 [info] [session_manager.cc:RemoveSession:217] [scqlengine] session(090a0b6d-ce06-11f0-bca6-0242ac110007) removed, running_cost(0ms), current running session=0
2025-12-01 00:03:33.336 [warning] [main.cc:termination_handler:284] [scqlengine] Received signal: Terminated, shutting down
2025-12-01 00:03:33.340 [info] [session_manager.cc:~SessionManager:57] [scqlengine] session manager notify watch thread to stop
2025-12-01 00:03:33.340 [info] [session_manager.cc:WatchSessionTimeoutThread:313] [scqlengine] Watch thread stopped.
2025-12-01 00:03:33.341 [info] [session_manager.cc:~SessionManager:60] [scqlengine] session manager joined the watch thread
2025-12-01 00:03:33.343 [warning] [main.cc:termination_handler:284] [scqlengine] Received signal: Terminated, shutting down
2025-12-01 00:03:33.349 [info] [session_manager.cc:~SessionManager:57] [scqlengine] session manager notify watch thread to stop
2025-12-01 00:03:33.349 [info] [session_manager.cc:WatchSessionTimeoutThread:313] [scqlengine] Watch thread stopped.
2025-12-01 00:03:33.349 [info] [session_manager.cc:~SessionManager:60] [scqlengine] session manager joined the watch thread
