2025-12-15 16:15:41.12154 INFO main.go:74 SCDB version: 0.9.5dev.20251130-21:40:26.5de28ec
2025-12-15 16:15:41.12154 INFO main.go:75 Starting to read config file: /root/autodl-tmp/scql/examples/scdb-tutorial/scdb/conf/config_hive.yml
2025-12-15 16:15:41.12154 INFO main.go:88 Starting to connect to database and do bootstrap if necessary...
2025-12-15 16:15:41.12154 INFO main.go:110 Starting to serve request with http...
2025-12-15 16:16:25.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:5906bee3-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.875939ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER alice PARTY_CODE \"alice\" IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-15 16:16:25.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.98877ms|
2025-12-15 16:16:25.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:59074abe-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.791302ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER bob PARTY_CODE \"bob\" IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-15 16:16:25.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.90469ms|
2025-12-15 16:16:25.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:5907a8d6-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.93156ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:16:25.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.026548ms|
2025-12-15 16:16:25.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:59080789-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.179041ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW DATABASES"|ClientIP:127.0.0.1
2025-12-15 16:16:25.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.269341ms|
2025-12-15 16:16:33.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: 5dea374f-d98e-11f0-86bb-0242ac110007, err: [planner:1044]Access denied for user 'alice'@'%' to database 'hive_test'
2025-12-15 16:16:33.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:5dea374f-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.564108ms|Reason:InvalidRequest|ErrorMsg:[planner:1044]Access denied for user 'alice'@'%' to database 'hive_test'|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:16:33.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.647889ms|
2025-12-15 16:16:33.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: 5dea95cd-d98e-11f0-86bb-0242ac110007, err: checkPrivilege: user alice need privilege Create_priv to do this operation
2025-12-15 16:16:33.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:5dea95cd-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.327346ms|Reason:InvalidRequest|ErrorMsg:checkPrivilege: user alice need privilege Create_priv to do this operation|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE hive_test.user_credit (ID STRING, credit_rank INT, income INT, age INT) REF_TABLE=user_credit DB_TYPE='hive'"|ClientIP:127.0.0.1
2025-12-15 16:16:33.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.387316ms|
2025-12-15 16:16:33.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: 5dead754-d98e-11f0-86bb-0242ac110007, err: TableByName: Table 'hive_test.user_credit' doesn't exist
2025-12-15 16:16:33.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:5dead754-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:804.383µs|Reason:InvalidRequest|ErrorMsg:TableByName: Table 'hive_test.user_credit' doesn't exist|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"DESCRIBE hive_test.user_credit"|ClientIP:127.0.0.1
2025-12-15 16:16:33.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=878.94µs|
2025-12-15 16:16:51.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:688f5e11-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.047403ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT ALL ON hive_test.* TO alice"|ClientIP:127.0.0.1
2025-12-15 16:16:51.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.202604ms|
2025-12-15 16:16:51.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:68901f29-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.443153ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT ALL ON hive_test.* TO bob"|ClientIP:127.0.0.1
2025-12-15 16:16:51.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.585913ms|
2025-12-15 16:16:51.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:549.589µs|Reason:InvalidRequest|ErrorMsg:line 1 column 15 near "FOR alice" |Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS FOR alice"|ClientIP:127.0.0.1
2025-12-15 16:16:51.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=656.031µs|
2025-12-15 16:16:51.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.07008ms|Reason:InvalidRequest|ErrorMsg:line 1 column 15 near "FOR bob" |Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS FOR bob"|ClientIP:127.0.0.1
2025-12-15 16:16:51.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.264563ms|
2025-12-15 16:17:00.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:6ddbb85d-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.189504ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:17:00.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.310414ms|
2025-12-15 16:17:00.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: 6ddc0b17-d98e-11f0-86bb-0242ac110007, err: ddl.executeCreateTable: unknown db type: hive
2025-12-15 16:17:00.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:6ddc0b17-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.245609ms|Reason:InvalidRequest|ErrorMsg:ddl.executeCreateTable: unknown db type: hive|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE hive_test.user_credit (ID STRING, credit_rank INT, income INT, age INT) REF_TABLE=user_credit DB_TYPE='hive'"|ClientIP:127.0.0.1
2025-12-15 16:17:00.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.313673ms|
2025-12-15 16:17:00.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: 6ddc557b-d98e-11f0-86bb-0242ac110007, err: TableByName: Table 'hive_test.user_credit' doesn't exist
2025-12-15 16:17:00.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:6ddc557b-d98e-11f0-86bb-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:784.278µs|Reason:InvalidRequest|ErrorMsg:TableByName: Table 'hive_test.user_credit' doesn't exist|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"DESCRIBE hive_test.user_credit"|ClientIP:127.0.0.1
2025-12-15 16:17:00.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=839.971µs|
2025-12-15 16:19:00.12154 INFO main.go:74 SCDB version: scql version
2025-12-15 16:19:00.12154 INFO main.go:75 Starting to read config file: /root/autodl-tmp/scql/examples/scdb-tutorial/scdb/conf/config_hive.yml
2025-12-15 16:19:00.12154 INFO main.go:88 Starting to connect to database and do bootstrap if necessary...
2025-12-15 16:19:00.12154 INFO main.go:110 Starting to serve request with http...
2025-12-15 16:19:27.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:c60e0946-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.779699ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER alice PARTY_CODE \"alice\" IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-15 16:19:27.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.873725ms|
2025-12-15 16:19:27.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:c60e8c97-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.73089ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE USER bob PARTY_CODE \"bob\" IDENTIFIED ***"|ClientIP:127.0.0.1
2025-12-15 16:19:27.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.833076ms|
2025-12-15 16:19:27.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:c60ee3a3-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.263363ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:19:27.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.323184ms|
2025-12-15 16:19:27.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:c60f2531-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.123145ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW DATABASES"|ClientIP:127.0.0.1
2025-12-15 16:19:27.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.21653ms|
2025-12-15 16:19:35.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:caa2b9b4-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.119223ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT ALL ON hive_test.* TO alice"|ClientIP:127.0.0.1
2025-12-15 16:19:35.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.260365ms|
2025-12-15 16:19:35.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:caa37934-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.235797ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"GRANT ALL ON hive_test.* TO bob"|ClientIP:127.0.0.1
2025-12-15 16:19:35.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.347631ms|
2025-12-15 16:19:35.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:773.403µs|Reason:InvalidRequest|ErrorMsg:line 1 column 15 near "FOR alice" |Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS FOR alice"|ClientIP:127.0.0.1
2025-12-15 16:19:35.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=908.388µs|
2025-12-15 16:19:35.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:344.114µs|Reason:InvalidRequest|ErrorMsg:line 1 column 15 near "FOR bob" |Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"SHOW GRANTS FOR bob"|ClientIP:127.0.0.1
2025-12-15 16:19:35.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=417.448µs|
2025-12-15 16:19:43.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:cf4b5c01-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.193375ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:19:43.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.36311ms|
2025-12-15 16:19:43.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:cf4bfdf4-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.482319ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE hive_test.user_credit (ID STRING, credit_rank INT, income INT, age INT) REF_TABLE=user_credit DB_TYPE='hive'"|ClientIP:127.0.0.1
2025-12-15 16:19:43.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.637825ms|
2025-12-15 16:19:43.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:cf4cc905-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.483683ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"DESCRIBE hive_test.user_credit"|ClientIP:127.0.0.1
2025-12-15 16:19:43.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.609802ms|
2025-12-15 16:19:50.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d3bbca63-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.312817ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:19:50.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.425344ms|
2025-12-15 16:19:50.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d3bc1d3e-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.486061ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE TABLE hive_test.user_stats (ID STRING, order_amount INT, is_active INT) REF_TABLE=user_stats DB_TYPE='hive'"|ClientIP:127.0.0.1
2025-12-15 16:19:50.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.561562ms|
2025-12-15 16:19:50.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d3bc918e-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.346088ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"DESCRIBE hive_test.user_stats"|ClientIP:127.0.0.1
2025-12-15 16:19:50.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.44705ms|
2025-12-15 16:20:32.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:ecc3e0f0-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.176328ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(ID, credit_rank, income, age) ON hive_test.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-15 16:20:32.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.310642ms|
2025-12-15 16:20:32.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:ecc6b19c-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.923271ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(ID, order_amount, is_active) ON hive_test.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-15 16:20:32.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.085706ms|
2025-12-15 16:20:53.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:20:53.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:20:53.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:20:53.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:f91d66b2-d98e-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:6.710503ms|Reason:InvalidRequest|ErrorMsg:ccl check failed: the 1th column hive_test.user_credit.id in the result is not visibile (UNKNOWN) to party alice|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:20:53.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.828728ms|
2025-12-15 16:21:31.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:0fea5e94-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.268013ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(ID, credit_rank, income, age) ON hive_test.user_credit TO alice"|ClientIP:127.0.0.1
2025-12-15 16:21:31.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.431573ms|
2025-12-15 16:21:31.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:0feb58fa-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.273792ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(ID, credit_rank, income, age) ON hive_test.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-15 16:21:31.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.488986ms|
2025-12-15 16:21:31.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:0fedbc6b-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.099604ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(ID, order_amount, is_active) ON hive_test.user_stats TO bob"|ClientIP:127.0.0.1
2025-12-15 16:21:31.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.24048ms|
2025-12-15 16:21:31.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:0feeb219-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.022867ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(ID, order_amount, is_active) ON hive_test.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-15 16:21:31.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.153162ms|
2025-12-15 16:21:41.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:21:41.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:21:41.12154 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"user_stats"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-15 16:21:41.12154 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"user_credit"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"7" value:{node_name:"publish.7" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"ID.13" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"ID"} tensors:{name:"credit_rank.14" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"income.15" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"} tensors:{name:"order_amount.17" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"} tensors:{name:"is_active.19" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"}}}}
2025-12-15 16:21:41.12154 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;,table_refs:[user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,t_5,},],attr:[sql:select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;,table_refs:[user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_6,},RightJoinIndex:{t_7,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,},RowsIndexFilter:{t_6,},],out:[Out:{t_8,t_9,t_10,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,},RowsIndexFilter:{t_7,},],out:[Out:{t_11,t_12,},],attr:[],party:[bob,]}"]
5 [label="copy:{in:[In:{t_12,},],out:[Out:{t_16,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
6 [label="copy:{in:[In:{t_11,},],out:[Out:{t_18,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
7 [label="publish:{in:[In:{t_9,t_8,t_10,t_16,t_18,},],out:[Out:{t_13,t_14,t_15,t_17,t_19,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_5:{order_amount:PRIVATE:INT64}"]
2 -> 3 [label = "t_6:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_7:{id:PRIVATE:INT64}"]
3 -> 7 [label = "t_10:{income:PRIVATE:INT64}"]
3 -> 7 [label = "t_8:{credit_rank:PRIVATE:INT64}"]
3 -> 7 [label = "t_9:{id:PRIVATE:STRING}"]
4 -> 5 [label = "t_12:{order_amount:PRIVATE:INT64}"]
4 -> 6 [label = "t_11:{is_active:PRIVATE:INT64}"]
5 -> 7 [label = "t_16:{order_amount:PRIVATE:INT64}"]
6 -> 7 [label = "t_18:{is_active:PRIVATE:INT64}"]
}

2025-12-15 16:21:41.12154 ERROR engine_stub.go:130 HttpEngineClient.Post/Do failed: url: http:///SCQLEngineService/RunExecutionPlan, err: Post "http:///SCQLEngineService/RunExecutionPlan": http: no Host in request URL
2025-12-15 16:21:41.12154 ERROR executor.go:147 |RequestID:|SessionID:156113b7-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:457.491µs|Reason:|ErrorMsg:Post error: Post "http:///SCQLEngineService/RunExecutionPlan": http: no Host in request URL|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice"},{"code":"bob","name":"bob","rank":1}],"job_id":"156113b7-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"5959947434227013954"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["user_stats"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"daa58d2f48f4c8f0d8184c91db7950353d38180f4e06f649a6295f8f389766cf"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:
2025-12-15 16:21:41.12154 ERROR executor.go:92 |RequestID:|SessionID:156113b7-d98f-11f0-a46f-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:1.234397ms|Reason:CallEngineFail|ErrorMsg:Post error: Post "http:///SCQLEngineService/RunExecutionPlan": http: no Host in request URL|Request:
2025-12-15 16:21:41.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:156113b7-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:6.8206ms|Reason:InvalidRequest|ErrorMsg:Post error: Post "http:///SCQLEngineService/RunExecutionPlan": http: no Host in request URL|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:21:41.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=6.872042ms|
2025-12-15 16:21:41.12154 ERROR engine_stub.go:130 HttpEngineClient.Post/Do failed: url: http:///SCQLEngineService/RunExecutionPlan, err: Post "http:///SCQLEngineService/RunExecutionPlan": http: no Host in request URL
2025-12-15 16:21:41.12154 ERROR executor.go:147 |RequestID:|SessionID:156113b7-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:1.083226ms|Reason:|ErrorMsg:Post error: Post "http:///SCQLEngineService/RunExecutionPlan": http: no Host in request URL|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice"},{"code":"bob","name":"bob","rank":1}],"job_id":"156113b7-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"5959947434227013954"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["user_credit"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"7":{"node_name":"publish.7","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"ID.13","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["ID"]},{"name":"credit_rank.14","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"income.15","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]},{"name":"order_amount.17","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]},{"name":"is_active.19","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}]}]}]},"sub_graph_checksum":"8a7b02dba1e69b07900be745837b7af24195be5948d637cf2880f6c53085b408"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:
2025-12-15 16:23:05.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:47776428-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.422986ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"ALTER USER alice WITH ENDPOINT 'localhost:8003'"|ClientIP:127.0.0.1
2025-12-15 16:23:05.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.5247ms|
2025-12-15 16:23:05.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:47799932-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.91951ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"ALTER USER bob WITH ENDPOINT 'localhost:8004'"|ClientIP:127.0.0.1
2025-12-15 16:23:05.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=3.063125ms|
2025-12-15 16:23:14.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:23:14.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:23:14.12154 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"user_credit"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"7" value:{node_name:"publish.7" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"ID.13" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"ID"} tensors:{name:"credit_rank.14" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"income.15" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"} tensors:{name:"order_amount.17" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"} tensors:{name:"is_active.19" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"}}}}
2025-12-15 16:23:14.12154 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"user_stats"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-15 16:23:14.12154 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;,table_refs:[user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,t_5,},],attr:[sql:select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;,table_refs:[user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_6,},RightJoinIndex:{t_7,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,},RowsIndexFilter:{t_6,},],out:[Out:{t_8,t_9,t_10,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,},RowsIndexFilter:{t_7,},],out:[Out:{t_11,t_12,},],attr:[],party:[bob,]}"]
5 [label="copy:{in:[In:{t_12,},],out:[Out:{t_16,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
6 [label="copy:{in:[In:{t_11,},],out:[Out:{t_18,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
7 [label="publish:{in:[In:{t_9,t_8,t_10,t_16,t_18,},],out:[Out:{t_13,t_14,t_15,t_17,t_19,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_5:{order_amount:PRIVATE:INT64}"]
2 -> 3 [label = "t_6:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_7:{id:PRIVATE:INT64}"]
3 -> 7 [label = "t_10:{income:PRIVATE:INT64}"]
3 -> 7 [label = "t_8:{credit_rank:PRIVATE:INT64}"]
3 -> 7 [label = "t_9:{id:PRIVATE:STRING}"]
4 -> 5 [label = "t_12:{order_amount:PRIVATE:INT64}"]
4 -> 6 [label = "t_11:{is_active:PRIVATE:INT64}"]
5 -> 7 [label = "t_16:{order_amount:PRIVATE:INT64}"]
6 -> 7 [label = "t_18:{is_active:PRIVATE:INT64}"]
}

2025-12-15 16:23:14.12154 INFO executor.go:149 |RequestID:|SessionID:4d15fa3a-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:194.958082ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"4d15fa3a-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"6932971676264063385"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["user_credit"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"7":{"node_name":"publish.7","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"ID.13","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["ID"]},{"name":"credit_rank.14","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"income.15","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]},{"name":"order_amount.17","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]},{"name":"is_active.19","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}]}]}]},"sub_graph_checksum":"8a7b02dba1e69b07900be745837b7af24195be5948d637cf2880f6c53085b408"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-15 16:23:14.12154 ERROR executor.go:92 |RequestID:|SessionID:4d15fa3a-d98f-11f0-a46f-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:196.102594ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan create session(4d15fa3a-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[Enforce fail at engine/auth/authenticator.cc:61] self_public_key_ == pi.pub_key. self public key mismatched
Stacktrace:
#0 scql::engine::auth::Authenticator::Verify()+0x55acbff2d3f1
#1 scql::engine::EngineServiceImpl::VerifyPublicKeys()+0x55acbff034d7
#2 scql::engine::EngineServiceImpl::RunExecutionPlan()+0x55acbfefff12
#3 scql::pb::SCQLEngineService::CallMethod()+0x55acc04cc8be
#4 brpc::policy::ProcessHttpRequest()+0x55acc545d640
#5 brpc::ProcessInputMessage()+0x55acc54b9303
#6 brpc::InputMessenger::InputMessageClosure::~InputMessageClosure()+0x55acc54b93ff
#7 brpc::InputMessenger::OnNewMessages()+0x55acc54ba469
#8 brpc::Socket::ProcessEvent()+0x55acc532f80e
#9 bthread::TaskGroup::task_runner()+0x55acc55a3719
#10 bthread_make_fcontext+0x55acc55d9d61
 "|Request:
2025-12-15 16:23:14.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4d15fa3a-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:203.886089ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan create session(4d15fa3a-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[Enforce fail at engine/auth/authenticator.cc:61] self_public_key_ == pi.pub_key. self public key mismatched
Stacktrace:
#0 scql::engine::auth::Authenticator::Verify()+0x55acbff2d3f1
#1 scql::engine::EngineServiceImpl::VerifyPublicKeys()+0x55acbff034d7
#2 scql::engine::EngineServiceImpl::RunExecutionPlan()+0x55acbfefff12
#3 scql::pb::SCQLEngineService::CallMethod()+0x55acc04cc8be
#4 brpc::policy::ProcessHttpRequest()+0x55acc545d640
#5 brpc::ProcessInputMessage()+0x55acc54b9303
#6 brpc::InputMessenger::InputMessageClosure::~InputMessageClosure()+0x55acc54b93ff
#7 brpc::InputMessenger::OnNewMessages()+0x55acc54ba469
#8 brpc::Socket::ProcessEvent()+0x55acc532f80e
#9 bthread::TaskGroup::task_runner()+0x55acc55a3719
#10 bthread_make_fcontext+0x55acc55d9d61
 |Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:23:14.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=203.971174ms|
2025-12-15 16:23:14.12154 INFO executor.go:149 |RequestID:|SessionID:4d15fa3a-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:246.651739ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"4d15fa3a-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"6932971676264063385"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["user_stats"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"daa58d2f48f4c8f0d8184c91db7950353d38180f4e06f649a6295f8f389766cf"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-15 16:25:14.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:25:14.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:25:14.12154 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"user_credit"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"7" value:{node_name:"publish.7" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"ID.13" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"ID"} tensors:{name:"credit_rank.14" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"income.15" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"} tensors:{name:"order_amount.17" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"} tensors:{name:"is_active.19" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"}}}}
2025-12-15 16:25:14.12154 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"user_stats"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-15 16:25:14.12154 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;,table_refs:[user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,t_5,},],attr:[sql:select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;,table_refs:[user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_6,},RightJoinIndex:{t_7,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,},RowsIndexFilter:{t_6,},],out:[Out:{t_8,t_9,t_10,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,},RowsIndexFilter:{t_7,},],out:[Out:{t_11,t_12,},],attr:[],party:[bob,]}"]
5 [label="copy:{in:[In:{t_12,},],out:[Out:{t_16,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
6 [label="copy:{in:[In:{t_11,},],out:[Out:{t_18,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
7 [label="publish:{in:[In:{t_9,t_8,t_10,t_16,t_18,},],out:[Out:{t_13,t_14,t_15,t_17,t_19,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_5:{order_amount:PRIVATE:INT64}"]
2 -> 3 [label = "t_6:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_7:{id:PRIVATE:INT64}"]
3 -> 7 [label = "t_10:{income:PRIVATE:INT64}"]
3 -> 7 [label = "t_8:{credit_rank:PRIVATE:INT64}"]
3 -> 7 [label = "t_9:{id:PRIVATE:STRING}"]
4 -> 5 [label = "t_12:{order_amount:PRIVATE:INT64}"]
4 -> 6 [label = "t_11:{is_active:PRIVATE:INT64}"]
5 -> 7 [label = "t_16:{order_amount:PRIVATE:INT64}"]
6 -> 7 [label = "t_18:{is_active:PRIVATE:INT64}"]
}

2025-12-15 16:25:15.12154 INFO executor.go:149 |RequestID:|SessionID:94d8fc6b-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:665.885957ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"94d8fc6b-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"5402413578761686245"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select a.credit_rank,a.id,a.income from user_credit as a where a.age>=20;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["user_credit"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"7":{"node_name":"publish.7","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"ID.13","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["ID"]},{"name":"credit_rank.14","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"income.15","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]},{"name":"order_amount.17","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]},{"name":"is_active.19","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}]}]}]},"sub_graph_checksum":"8a7b02dba1e69b07900be745837b7af24195be5948d637cf2880f6c53085b408"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-15 16:25:15.12154 INFO executor.go:149 |RequestID:|SessionID:94d8fc6b-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:665.982834ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"94d8fc6b-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"5402413578761686245"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select b.id,b.is_active,b.order_amount from user_stats as b where b.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["user_stats"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"daa58d2f48f4c8f0d8184c91db7950353d38180f4e06f649a6295f8f389766cf"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-15 16:25:15.12154 ERROR executor.go:92 |RequestID:|SessionID:94d8fc6b-d98f-11f0-a46f-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:667.028285ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(94d8fc6b-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/embed_router.cc:41] Fail to split '$db.$table' format from: user_credit; (peer: bob, code: 320, msg: RunExecutionPlan run jobs(94d8fc6b-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/embed_router.cc:41] Fail to split '$db.$table' format from: user_stats)"|Request:
2025-12-15 16:25:15.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:94d8fc6b-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:675.838986ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(94d8fc6b-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/embed_router.cc:41] Fail to split '$db.$table' format from: user_credit; (peer: bob, code: 320, msg: RunExecutionPlan run jobs(94d8fc6b-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/embed_router.cc:41] Fail to split '$db.$table' format from: user_stats)|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:25:15.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=675.943503ms|
2025-12-15 16:26:12.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: b7226020-d98f-11f0-a46f-0242ac110007, err: user root.% is not the owner of table hive_test.user_credit
2025-12-15 16:26:12.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:b7226020-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.118978ms|Reason:InvalidRequest|ErrorMsg:user root.% is not the owner of table hive_test.user_credit|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP TABLE IF EXISTS hive_test.user_credit"|ClientIP:127.0.0.1
2025-12-15 16:26:12.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.182181ms|
2025-12-15 16:26:12.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: b722ac63-d98f-11f0-a46f-0242ac110007, err: user root.% is not the owner of table hive_test.user_stats
2025-12-15 16:26:12.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:b722ac63-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.623452ms|Reason:InvalidRequest|ErrorMsg:user root.% is not the owner of table hive_test.user_stats|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"root"}}} query:"DROP TABLE IF EXISTS hive_test.user_stats"|ClientIP:127.0.0.1
2025-12-15 16:26:12.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.724019ms|
2025-12-15 16:26:12.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:b724bb69-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.530707ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:26:12.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.646438ms|
2025-12-15 16:26:12.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: b7250ffb-d98f-11f0-a46f-0242ac110007, err: ddl.executeCreateTable: table hive_test.user_credit already exists
2025-12-15 16:26:12.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:b7250ffb-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.437236ms|Reason:InvalidRequest|ErrorMsg:ddl.executeCreateTable: table hive_test.user_credit already exists|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE hive_test.user_credit (ID STRING, credit_rank INT, income INT, age INT) REF_TABLE=default.user_credit DB_TYPE='hive'"|ClientIP:127.0.0.1
2025-12-15 16:26:12.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.528598ms|
2025-12-15 16:26:12.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:b7256197-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.000884ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"DESCRIBE hive_test.user_credit"|ClientIP:127.0.0.1
2025-12-15 16:26:12.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.081937ms|
2025-12-15 16:26:12.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:b72749cd-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.477966ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:26:12.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.588998ms|
2025-12-15 16:26:12.12154 ERROR submit_handler.go:188 Failed to runSQL, sessionid: b7279f33-d98f-11f0-a46f-0242ac110007, err: ddl.executeCreateTable: table hive_test.user_stats already exists
2025-12-15 16:26:12.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:b7279f33-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.032388ms|Reason:InvalidRequest|ErrorMsg:ddl.executeCreateTable: table hive_test.user_stats already exists|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE TABLE hive_test.user_stats (ID STRING, order_amount INT, is_active INT) REF_TABLE=default.user_stats DB_TYPE='hive'"|ClientIP:127.0.0.1
2025-12-15 16:26:12.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.077834ms|
2025-12-15 16:26:12.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:b727d836-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.231662ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"DESCRIBE hive_test.user_stats"|ClientIP:127.0.0.1
2025-12-15 16:26:12.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.316531ms|
2025-12-15 16:26:45.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:ca9f7fa7-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:4.359535ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"DROP TABLE IF EXISTS hive_test.user_credit"|ClientIP:127.0.0.1
2025-12-15 16:26:45.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.300712ms|
2025-12-15 16:26:45.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:caa2053b-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.701816ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"DROP TABLE IF EXISTS hive_test.user_stats"|ClientIP:127.0.0.1
2025-12-15 16:26:45.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.822667ms|
2025-12-15 16:26:55.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d0fcfd51-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.196045ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:26:55.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.308342ms|
2025-12-15 16:26:55.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d0fd50bb-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.248805ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"CREATE TABLE hive_test.user_credit (ID STRING, credit_rank INT, income INT, age INT) REF_TABLE=default.user_credit DB_TYPE='hive'"|ClientIP:127.0.0.1
2025-12-15 16:26:55.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.358563ms|
2025-12-15 16:26:55.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d0fe306b-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.084033ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"DESCRIBE hive_test.user_credit"|ClientIP:127.0.0.1
2025-12-15 16:26:55.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.154327ms|
2025-12-15 16:26:55.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d1000a11-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.080903ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE DATABASE IF NOT EXISTS hive_test"|ClientIP:127.0.0.1
2025-12-15 16:26:55.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.158853ms|
2025-12-15 16:26:55.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d1005064-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:2.601909ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"CREATE TABLE hive_test.user_stats (ID STRING, order_amount INT, is_active INT) REF_TABLE=default.user_stats DB_TYPE='hive'"|ClientIP:127.0.0.1
2025-12-15 16:26:55.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=2.680884ms|
2025-12-15 16:26:55.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d100c988-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:1.255066ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"DESCRIBE hive_test.user_stats"|ClientIP:127.0.0.1
2025-12-15 16:26:55.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=1.322839ms|
2025-12-15 16:27:04.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d65cf006-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.304205ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(ID, credit_rank, income, age) ON hive_test.user_credit TO alice"|ClientIP:127.0.0.1
2025-12-15 16:27:04.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.464888ms|
2025-12-15 16:27:04.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d65de36a-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:5.258972ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"GRANT SELECT PLAINTEXT(ID, credit_rank, income, age) ON hive_test.user_credit TO bob"|ClientIP:127.0.0.1
2025-12-15 16:27:04.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=5.42292ms|
2025-12-15 16:27:04.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d660765f-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.986788ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(ID, order_amount, is_active) ON hive_test.user_stats TO bob"|ClientIP:127.0.0.1
2025-12-15 16:27:04.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.110442ms|
2025-12-15 16:27:04.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:d6613565-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:3.902689ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"bob"}}} query:"GRANT SELECT PLAINTEXT(ID, order_amount, is_active) ON hive_test.user_stats TO alice"|ClientIP:127.0.0.1
2025-12-15 16:27:04.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=4.033923ms|
2025-12-15 16:27:15.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:27:15.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:27:15.12154 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_credit"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"7" value:{node_name:"publish.7" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"ID.13" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"ID"} tensors:{name:"credit_rank.14" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"income.15" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"} tensors:{name:"order_amount.17" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"} tensors:{name:"is_active.19" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"}}}}
2025-12-15 16:27:15.12154 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_stats"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-15 16:27:15.12154 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;,table_refs:[default.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,t_5,},],attr:[sql:select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;,table_refs:[default.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_6,},RightJoinIndex:{t_7,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,},RowsIndexFilter:{t_6,},],out:[Out:{t_8,t_9,t_10,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,},RowsIndexFilter:{t_7,},],out:[Out:{t_11,t_12,},],attr:[],party:[bob,]}"]
5 [label="copy:{in:[In:{t_12,},],out:[Out:{t_16,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
6 [label="copy:{in:[In:{t_11,},],out:[Out:{t_18,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
7 [label="publish:{in:[In:{t_9,t_8,t_10,t_16,t_18,},],out:[Out:{t_13,t_14,t_15,t_17,t_19,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_5:{order_amount:PRIVATE:INT64}"]
2 -> 3 [label = "t_6:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_7:{id:PRIVATE:INT64}"]
3 -> 7 [label = "t_10:{income:PRIVATE:INT64}"]
3 -> 7 [label = "t_8:{credit_rank:PRIVATE:INT64}"]
3 -> 7 [label = "t_9:{id:PRIVATE:STRING}"]
4 -> 5 [label = "t_12:{order_amount:PRIVATE:INT64}"]
4 -> 6 [label = "t_11:{is_active:PRIVATE:INT64}"]
5 -> 7 [label = "t_16:{order_amount:PRIVATE:INT64}"]
6 -> 7 [label = "t_18:{is_active:PRIVATE:INT64}"]
}

2025-12-15 16:27:15.12154 INFO executor.go:149 |RequestID:|SessionID:dc754f6d-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:183.469084ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"dc754f6d-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"1999277632434145083"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_credit"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"7":{"node_name":"publish.7","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"ID.13","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["ID"]},{"name":"credit_rank.14","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"income.15","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]},{"name":"order_amount.17","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]},{"name":"is_active.19","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}]}]}]},"sub_graph_checksum":"dcee3fcd8ae8fd1fda706e9cc3161d1e2224e29e7b9bd1429fc3a08a3e41c3f8"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-15 16:27:15.12154 INFO executor.go:149 |RequestID:|SessionID:dc754f6d-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:183.601639ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"dc754f6d-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"1999277632434145083"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_stats"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"c3e975d2021f49e2dfab29f30f2ebc4ee842df11adc233ef07be71a5dd07712a"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-15 16:27:15.12154 ERROR executor.go:92 |RequestID:|SessionID:dc754f6d-d98f-11f0-a46f-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:184.579776ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(dc754f6d-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Flight returned unavailable error, with message: failed to connect to all addresses; last error: UNKNOWN: ipv4:127.0.0.1:7890: Failed to connect to remote host: connect: Connection refused (111). Detail: Unavailable; (peer: bob, code: 320, msg: RunExecutionPlan run jobs(dc754f6d-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Flight returned unavailable error, with message: failed to connect to all addresses; last error: UNKNOWN: ipv4:127.0.0.1:7890: Failed to connect to remote host: connect: Connection refused (111). Detail: Unavailable)"|Request:
2025-12-15 16:27:15.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:dc754f6d-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:191.880477ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(dc754f6d-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Flight returned unavailable error, with message: failed to connect to all addresses; last error: UNKNOWN: ipv4:127.0.0.1:7890: Failed to connect to remote host: connect: Connection refused (111). Detail: Unavailable; (peer: bob, code: 320, msg: RunExecutionPlan run jobs(dc754f6d-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Flight returned unavailable error, with message: failed to connect to all addresses; last error: UNKNOWN: ipv4:127.0.0.1:7890: Failed to connect to remote host: connect: Connection refused (111). Detail: Unavailable)|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:27:15.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=192.047688ms|
2025-12-15 16:28:04.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:28:04.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:28:04.12154 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_credit"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"7" value:{node_name:"publish.7" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"ID.13" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"ID"} tensors:{name:"credit_rank.14" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"income.15" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"} tensors:{name:"order_amount.17" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"} tensors:{name:"is_active.19" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"}}}}
2025-12-15 16:28:04.12154 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_stats"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-15 16:28:04.12154 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;,table_refs:[default.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,t_5,},],attr:[sql:select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;,table_refs:[default.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_6,},RightJoinIndex:{t_7,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,},RowsIndexFilter:{t_6,},],out:[Out:{t_8,t_9,t_10,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,},RowsIndexFilter:{t_7,},],out:[Out:{t_11,t_12,},],attr:[],party:[bob,]}"]
5 [label="copy:{in:[In:{t_12,},],out:[Out:{t_16,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
6 [label="copy:{in:[In:{t_11,},],out:[Out:{t_18,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
7 [label="publish:{in:[In:{t_9,t_8,t_10,t_16,t_18,},],out:[Out:{t_13,t_14,t_15,t_17,t_19,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_5:{order_amount:PRIVATE:INT64}"]
2 -> 3 [label = "t_6:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_7:{id:PRIVATE:INT64}"]
3 -> 7 [label = "t_10:{income:PRIVATE:INT64}"]
3 -> 7 [label = "t_8:{credit_rank:PRIVATE:INT64}"]
3 -> 7 [label = "t_9:{id:PRIVATE:STRING}"]
4 -> 5 [label = "t_12:{order_amount:PRIVATE:INT64}"]
4 -> 6 [label = "t_11:{is_active:PRIVATE:INT64}"]
5 -> 7 [label = "t_16:{order_amount:PRIVATE:INT64}"]
6 -> 7 [label = "t_18:{is_active:PRIVATE:INT64}"]
}

2025-12-15 16:28:04.12154 INFO executor.go:149 |RequestID:|SessionID:f9d13ba1-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:291.037784ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"f9d13ba1-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"8566195786011296438"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_credit"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"7":{"node_name":"publish.7","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"ID.13","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["ID"]},{"name":"credit_rank.14","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"income.15","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]},{"name":"order_amount.17","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]},{"name":"is_active.19","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}]}]}]},"sub_graph_checksum":"dcee3fcd8ae8fd1fda706e9cc3161d1e2224e29e7b9bd1429fc3a08a3e41c3f8"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-15 16:28:04.12154 ERROR executor.go:92 |RequestID:|SessionID:f9d13ba1-d98f-11f0-a46f-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:291.81899ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(f9d13ba1-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Query execution failed: Parser Error: syntax error at or near "type"

LINE 1: type.googleapis.com/arrow.flight.protocol.sql.CommandStatem...
        ^. Detail: Failed. Detail: Failed"|Request:
2025-12-15 16:28:04.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:f9d13ba1-d98f-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:296.626248ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(f9d13ba1-d98f-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Query execution failed: Parser Error: syntax error at or near "type"

LINE 1: type.googleapis.com/arrow.flight.protocol.sql.CommandStatem...
        ^. Detail: Failed. Detail: Failed|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:28:04.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=296.729056ms|
2025-12-15 16:28:04.12154 INFO executor.go:149 |RequestID:|SessionID:f9d13ba1-d98f-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:296.703659ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"f9d13ba1-d98f-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"8566195786011296438"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_stats"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"c3e975d2021f49e2dfab29f30f2ebc4ee842df11adc233ef07be71a5dd07712a"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-15 16:30:19.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:30:19.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:30:19.12154 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_credit"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"7" value:{node_name:"publish.7" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"ID.13" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"ID"} tensors:{name:"credit_rank.14" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"income.15" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"} tensors:{name:"order_amount.17" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"} tensors:{name:"is_active.19" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"}}}}
2025-12-15 16:30:19.12154 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_stats"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-15 16:30:19.12154 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;,table_refs:[default.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,t_5,},],attr:[sql:select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;,table_refs:[default.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_6,},RightJoinIndex:{t_7,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,},RowsIndexFilter:{t_6,},],out:[Out:{t_8,t_9,t_10,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,},RowsIndexFilter:{t_7,},],out:[Out:{t_11,t_12,},],attr:[],party:[bob,]}"]
5 [label="copy:{in:[In:{t_12,},],out:[Out:{t_16,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
6 [label="copy:{in:[In:{t_11,},],out:[Out:{t_18,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
7 [label="publish:{in:[In:{t_9,t_8,t_10,t_16,t_18,},],out:[Out:{t_13,t_14,t_15,t_17,t_19,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_5:{order_amount:PRIVATE:INT64}"]
2 -> 3 [label = "t_6:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_7:{id:PRIVATE:INT64}"]
3 -> 7 [label = "t_10:{income:PRIVATE:INT64}"]
3 -> 7 [label = "t_8:{credit_rank:PRIVATE:INT64}"]
3 -> 7 [label = "t_9:{id:PRIVATE:STRING}"]
4 -> 5 [label = "t_12:{order_amount:PRIVATE:INT64}"]
4 -> 6 [label = "t_11:{is_active:PRIVATE:INT64}"]
5 -> 7 [label = "t_16:{order_amount:PRIVATE:INT64}"]
6 -> 7 [label = "t_18:{is_active:PRIVATE:INT64}"]
}

2025-12-15 16:30:19.12154 INFO executor.go:149 |RequestID:|SessionID:4a2e1b2c-d990-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:362.688682ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"4a2e1b2c-d990-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"1026345501476269805"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_stats"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"c3e975d2021f49e2dfab29f30f2ebc4ee842df11adc233ef07be71a5dd07712a"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-15 16:30:19.12154 ERROR executor.go:92 |RequestID:|SessionID:4a2e1b2c-d990-11f0-a46f-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:363.492585ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(4a2e1b2c-d990-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Query execution failed: Parser Error: syntax error at or near "default"

LINE 1: select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;
                                                    ^. Detail: Failed. Detail: Failed"|Request:
2025-12-15 16:30:19.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:4a2e1b2c-d990-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:368.771239ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(4a2e1b2c-d990-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Query execution failed: Parser Error: syntax error at or near "default"

LINE 1: select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;
                                                    ^. Detail: Failed. Detail: Failed|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:30:19.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=368.864996ms|
2025-12-15 16:30:19.12154 INFO executor.go:149 |RequestID:|SessionID:4a2e1b2c-d990-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:367.261763ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"4a2e1b2c-d990-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"1026345501476269805"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_credit"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"7":{"node_name":"publish.7","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"ID.13","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["ID"]},{"name":"credit_rank.14","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"income.15","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]},{"name":"order_amount.17","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]},{"name":"is_active.19","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}]}]}]},"sub_graph_checksum":"dcee3fcd8ae8fd1fda706e9cc3161d1e2224e29e7b9bd1429fc3a08a3e41c3f8"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-15 16:36:51.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:36:51.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:36:51.12154 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_credit"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"7" value:{node_name:"publish.7" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"ID.13" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"ID"} tensors:{name:"credit_rank.14" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"income.15" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"} tensors:{name:"order_amount.17" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"} tensors:{name:"is_active.19" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"}}}}
2025-12-15 16:36:51.12154 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_stats"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-15 16:36:51.12154 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;,table_refs:[default.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,t_5,},],attr:[sql:select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;,table_refs:[default.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_6,},RightJoinIndex:{t_7,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,},RowsIndexFilter:{t_6,},],out:[Out:{t_8,t_9,t_10,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,},RowsIndexFilter:{t_7,},],out:[Out:{t_11,t_12,},],attr:[],party:[bob,]}"]
5 [label="copy:{in:[In:{t_12,},],out:[Out:{t_16,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
6 [label="copy:{in:[In:{t_11,},],out:[Out:{t_18,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
7 [label="publish:{in:[In:{t_9,t_8,t_10,t_16,t_18,},],out:[Out:{t_13,t_14,t_15,t_17,t_19,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_5:{order_amount:PRIVATE:INT64}"]
2 -> 3 [label = "t_6:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_7:{id:PRIVATE:INT64}"]
3 -> 7 [label = "t_10:{income:PRIVATE:INT64}"]
3 -> 7 [label = "t_8:{credit_rank:PRIVATE:INT64}"]
3 -> 7 [label = "t_9:{id:PRIVATE:STRING}"]
4 -> 5 [label = "t_12:{order_amount:PRIVATE:INT64}"]
4 -> 6 [label = "t_11:{is_active:PRIVATE:INT64}"]
5 -> 7 [label = "t_16:{order_amount:PRIVATE:INT64}"]
6 -> 7 [label = "t_18:{is_active:PRIVATE:INT64}"]
}

2025-12-15 16:36:51.12154 INFO executor.go:149 |RequestID:|SessionID:33c7e1f8-d991-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:459.490704ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"33c7e1f8-d991-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"5610888430483297897"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_stats"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"c3e975d2021f49e2dfab29f30f2ebc4ee842df11adc233ef07be71a5dd07712a"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-15 16:36:51.12154 ERROR executor.go:92 |RequestID:|SessionID:33c7e1f8-d991-11f0-a46f-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:460.597034ms|Reason:InvalidResponse|ErrorMsg:Error: code=320, msg="RunExecutionPlan run jobs(33c7e1f8-d991-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Query execution failed: Parser Error: syntax error at or near "default"

LINE 1: select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;
                                                    ^. Detail: Failed. Detail: Failed"|Request:
2025-12-15 16:36:51.12154 ERROR submit_and_get_handler.go:80 |RequestID:|SessionID:33c7e1f8-d991-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:469.128939ms|Reason:InvalidRequest|ErrorMsg:RunExecutionPlan run jobs(33c7e1f8-d991-11f0-a46f-0242ac110007) failed, catch std::exception=[engine/datasource/arrow_sql_adaptor.cc:149] IOError: Query execution failed: Parser Error: syntax error at or near "default"

LINE 1: select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;
                                                    ^. Detail: Failed. Detail: Failed|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:36:51.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=469.221854ms|
2025-12-15 16:36:51.12154 INFO executor.go:149 |RequestID:|SessionID:33c7e1f8-d991-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:463.16325ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"33c7e1f8-d991-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"5610888430483297897"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_credit"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"7":{"node_name":"publish.7","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"ID.13","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["ID"]},{"name":"credit_rank.14","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"income.15","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]},{"name":"order_amount.17","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]},{"name":"is_active.19","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}]}]}]},"sub_graph_checksum":"dcee3fcd8ae8fd1fda706e9cc3161d1e2224e29e7b9bd1429fc3a08a3e41c3f8"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-15 16:44:10.12154 WARNING interpreter.go:60 Compile: req.CreatedAt is nil, using current time
2025-12-15 16:44:10.12154 WARNING interpreter.go:60 compileCore: req.CreatedAt is nil, using current time
2025-12-15 16:44:10.12154 INFO interpreter.go:241 subgraph of alice: nodes:{key:"0" value:{node_name:"runsql.0" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_credit"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"3" value:{node_name:"filter_by_index.3" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_credit.credit_rank.0" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2} tensors:{name:"hive_test.user_credit.income.2" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"7" value:{node_name:"publish.7" op_type:"Publish" inputs:{key:"In" value:{tensors:{name:"hive_test.user_credit.id.9" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.credit_rank.8" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_credit.income.10" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"ID.13" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"ID"} tensors:{name:"credit_rank.14" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"credit_rank"} tensors:{name:"income.15" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"income"} tensors:{name:"order_amount.17" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"order_amount"} tensors:{name:"is_active.19" elem_type:STRING annotation:{status:TENSORSTATUS_PRIVATE} string_data:"is_active"}}}}} policy:{worker_num:1 pipelines:{subdags:{jobs:{node_ids:"0"}} subdags:{} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"3"}} subdags:{} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"7"}}}}
2025-12-15 16:44:10.12154 INFO interpreter.go:241 subgraph of bob: nodes:{key:"1" value:{node_name:"runsql.1" op_type:"RunSQL" outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"sql" value:{t:{name:".0" elem_type:STRING string_data:"select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"}}} attributes:{key:"table_refs" value:{t:{name:".0" shape:{dim:{dim_value:1}} elem_type:STRING string_data:"default.user_stats"}}}}} nodes:{key:"2" value:{node_name:"join.2" op_type:"Join" inputs:{key:"Left" value:{tensors:{name:"hive_test.user_credit.id.1" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:2}}} inputs:{key:"Right" value:{tensors:{name:"hive_test.user_stats.id.3" elem_type:STRING option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"LeftJoinIndex" value:{tensors:{name:"hive_test.user_credit.id.6" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"RightJoinIndex" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" shape:{dim:{dim_value:2}} elem_type:STRING string_data:"alice" string_data:"bob"}}} attributes:{key:"join_type" value:{t:{name:".0" elem_type:INT64 int64_data:0}}} attributes:{key:"psi_algorithm" value:{t:{name:".0" elem_type:INT64 int64_data:0}}}}} nodes:{key:"4" value:{node_name:"filter_by_index.4" op_type:"FilterByIndex" inputs:{key:"Data" value:{tensors:{name:"hive_test.user_stats.is_active.4" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.5" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} inputs:{key:"RowsIndexFilter" value:{tensors:{name:"hive_test.user_stats.id.7" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1} tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}}}} nodes:{key:"5" value:{node_name:"copy.5" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.order_amount.12" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.order_amount.16" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} nodes:{key:"6" value:{node_name:"copy.6" op_type:"Copy" inputs:{key:"In" value:{tensors:{name:"hive_test.user_stats.is_active.11" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} outputs:{key:"Out" value:{tensors:{name:"hive_test.user_stats.is_active.18" elem_type:INT64 option:REFERENCE annotation:{status:TENSORSTATUS_PRIVATE} ref_num:1}}} attributes:{key:"input_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"bob"}}} attributes:{key:"output_party_codes" value:{t:{name:".0" elem_type:STRING string_data:"alice"}}}}} policy:{worker_num:1 pipelines:{subdags:{} subdags:{jobs:{node_ids:"1"}} subdags:{jobs:{node_ids:"2"} need_call_barrier_after_jobs:true} subdags:{} subdags:{jobs:{node_ids:"4"}} subdags:{jobs:{node_ids:"5"} need_call_barrier_after_jobs:true} subdags:{jobs:{node_ids:"6"} need_call_barrier_after_jobs:true} subdags:{}}}
2025-12-15 16:44:10.12154 INFO submit_and_get_handler.go:305 Execution Plan:
digraph G {
0 [label="runsql:{in:[],out:[Out:{t_0,t_1,t_2,},],attr:[sql:select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;,table_refs:[default.user_credit],],party:[alice,]}"]
1 [label="runsql:{in:[],out:[Out:{t_3,t_4,t_5,},],attr:[sql:select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;,table_refs:[default.user_stats],],party:[bob,]}"]
2 [label="join:{in:[Left:{t_1,},Right:{t_3,},],out:[LeftJoinIndex:{t_6,},RightJoinIndex:{t_7,},],attr:[input_party_codes:[alice bob],join_type:0,psi_algorithm:0,],party:[alice,bob,]}"]
3 [label="filter_by_index:{in:[Data:{t_0,t_1,t_2,},RowsIndexFilter:{t_6,},],out:[Out:{t_8,t_9,t_10,},],attr:[],party:[alice,]}"]
4 [label="filter_by_index:{in:[Data:{t_4,t_5,},RowsIndexFilter:{t_7,},],out:[Out:{t_11,t_12,},],attr:[],party:[bob,]}"]
5 [label="copy:{in:[In:{t_12,},],out:[Out:{t_16,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
6 [label="copy:{in:[In:{t_11,},],out:[Out:{t_18,},],attr:[input_party_codes:bob,output_party_codes:alice,],party:[bob,alice,]}"]
7 [label="publish:{in:[In:{t_9,t_8,t_10,t_16,t_18,},],out:[Out:{t_13,t_14,t_15,t_17,t_19,},],attr:[],party:[alice,]}"]
0 -> 2 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_0:{credit_rank:PRIVATE:INT64}"]
0 -> 3 [label = "t_1:{id:PRIVATE:STRING}"]
0 -> 3 [label = "t_2:{income:PRIVATE:INT64}"]
1 -> 2 [label = "t_3:{id:PRIVATE:STRING}"]
1 -> 4 [label = "t_4:{is_active:PRIVATE:INT64}"]
1 -> 4 [label = "t_5:{order_amount:PRIVATE:INT64}"]
2 -> 3 [label = "t_6:{id:PRIVATE:INT64}"]
2 -> 4 [label = "t_7:{id:PRIVATE:INT64}"]
3 -> 7 [label = "t_10:{income:PRIVATE:INT64}"]
3 -> 7 [label = "t_8:{credit_rank:PRIVATE:INT64}"]
3 -> 7 [label = "t_9:{id:PRIVATE:STRING}"]
4 -> 5 [label = "t_12:{order_amount:PRIVATE:INT64}"]
4 -> 6 [label = "t_11:{is_active:PRIVATE:INT64}"]
5 -> 7 [label = "t_16:{order_amount:PRIVATE:INT64}"]
6 -> 7 [label = "t_18:{is_active:PRIVATE:INT64}"]
}

2025-12-15 16:44:10.12154 INFO executor.go:149 |RequestID:|SessionID:399aa49a-d992-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:228.581499ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"bob","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"399aa49a-d992-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"8716064672458806741"}},"graph":{"nodes":{"1":{"node_name":"runsql.1","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select b.id,b.is_active,b.order_amount from default.user_stats as b where b.is_active=1;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_stats"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"4":{"node_name":"filter_by_index.4","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_stats.is_active.4","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.5","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{},{"jobs":[{"node_ids":["1"]}]},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{},{"jobs":[{"node_ids":["4"]}]},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{}]}]},"sub_graph_checksum":"c3e975d2021f49e2dfab29f30f2ebc4ee842df11adc233ef07be71a5dd07712a"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:bob|Url:localhost:8004
2025-12-15 16:44:10.12154 INFO executor.go:149 |RequestID:|SessionID:399aa49a-d992-11f0-a46f-0242ac110007|ActionName:Executor@RunExecutionPlan|CostTime:228.729547ms|Reason:|ErrorMsg:|Request:{"job_params":{"party_code":"alice","parties":[{"code":"alice","name":"alice","host":"localhost:8003"},{"code":"bob","name":"bob","host":"localhost:8004","rank":1}],"job_id":"399aa49a-d992-11f0-a46f-0242ac110007","spu_runtime_cfg":{"protocol":"SEMI2K","field":"FM64","public_random_seed":"8716064672458806741"}},"graph":{"nodes":{"0":{"node_name":"runsql.0","op_type":"RunSQL","outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"sql":{"t":{"name":".0","elem_type":"STRING","string_data":["select a.credit_rank,a.id,a.income from default.user_credit as a where a.age>=20;"]}},"table_refs":{"t":{"name":".0","shape":{"dim":[{"dim_value":"1"}]},"elem_type":"STRING","string_data":["default.user_credit"]}}}},"2":{"node_name":"join.2","op_type":"Join","inputs":{"Left":{"tensors":[{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2}]},"Right":{"tensors":[{"name":"hive_test.user_stats.id.3","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"LeftJoinIndex":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RightJoinIndex":{"tensors":[{"name":"hive_test.user_stats.id.7","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","shape":{"dim":[{"dim_value":"2"}]},"elem_type":"STRING","string_data":["alice","bob"]}},"join_type":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}},"psi_algorithm":{"t":{"name":".0","elem_type":"INT64","int64_data":["0"]}}}},"3":{"node_name":"filter_by_index.3","op_type":"FilterByIndex","inputs":{"Data":{"tensors":[{"name":"hive_test.user_credit.credit_rank.0","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.1","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":2},{"name":"hive_test.user_credit.income.2","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]},"RowsIndexFilter":{"tensors":[{"name":"hive_test.user_credit.id.6","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}}},"5":{"node_name":"copy.5","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.order_amount.12","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"6":{"node_name":"copy.6","op_type":"Copy","inputs":{"In":{"tensors":[{"name":"hive_test.user_stats.is_active.11","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"attributes":{"input_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["bob"]}},"output_party_codes":{"t":{"name":".0","elem_type":"STRING","string_data":["alice"]}}}},"7":{"node_name":"publish.7","op_type":"Publish","inputs":{"In":{"tensors":[{"name":"hive_test.user_credit.id.9","elem_type":"STRING","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.credit_rank.8","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_credit.income.10","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.order_amount.16","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1},{"name":"hive_test.user_stats.is_active.18","elem_type":"INT64","option":"REFERENCE","annotation":{"status":"TENSORSTATUS_PRIVATE"},"ref_num":1}]}},"outputs":{"Out":{"tensors":[{"name":"ID.13","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["ID"]},{"name":"credit_rank.14","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["credit_rank"]},{"name":"income.15","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["income"]},{"name":"order_amount.17","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["order_amount"]},{"name":"is_active.19","elem_type":"STRING","annotation":{"status":"TENSORSTATUS_PRIVATE"},"string_data":["is_active"]}]}}}},"policy":{"worker_num":1,"pipelines":[{"subdags":[{"jobs":[{"node_ids":["0"]}]},{},{"jobs":[{"node_ids":["2"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["3"]}]},{},{"jobs":[{"node_ids":["5"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["6"]}],"need_call_barrier_after_jobs":true},{"jobs":[{"node_ids":["7"]}]}]}]},"sub_graph_checksum":"dcee3fcd8ae8fd1fda706e9cc3161d1e2224e29e7b9bd1429fc3a08a3e41c3f8"},"graph_checksum":{},"callback_url":"http://localhost:8080/cb/engine"}|PartyCode:alice|Url:localhost:8003
2025-12-15 16:44:10.12154 INFO executor.go:94 |RequestID:|SessionID:399aa49a-d992-11f0-a46f-0242ac110007|ActionName:EngineStub@RunExecutionPlan|CostTime:229.250372ms|Reason:|ErrorMsg:|Request:
2025-12-15 16:44:10.12154 INFO submit_and_get_handler.go:83 |RequestID:|SessionID:399aa49a-d992-11f0-a46f-0242ac110007|ActionName:SCDBSubmitAndGetHandler@/public/submit_and_get|CostTime:234.934517ms|Reason:|ErrorMsg:|Request:user:{user:{account_system_type:NATIVE_USER native_user:{name:"alice"}}} query:"SELECT a.ID, a.credit_rank, a.income, b.order_amount, b.is_active FROM hive_test.user_credit a JOIN hive_test.user_stats b ON a.ID = b.ID WHERE a.age >= 20 AND b.is_active = 1"|ClientIP:127.0.0.1
2025-12-15 16:44:10.12154 INFO server.go:158 |GIN|status=200|method=POST|path=/public/submit_and_get|ip=127.0.0.1|latency=234.990746ms|
