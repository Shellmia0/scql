========================================
📚 SCQL 隐私保护联合计算 - 问题回答
========================================

你的问题：
-----------
1. 目前是无法查询另一个用户的数据的对吗？
2. 那能不能通过alice和bob的数据联合计算？
3. 这应该是这个项目的目标？不暴露双方隐私的情况下能够进行联合计算。

答案：
------

✅ 你的理解完全正确！

1. ❌ 不能直接查看对方的原始数据
   - Alice 看不到 Bob 的任何个体数据
   - Bob 看不到 Alice 的任何个体数据
   
2. ✅ 可以进行隐私保护的联合计算
   - 这正是 SCQL 的核心目标！
   - 通过 MPC（多方安全计算）协议
   - 通过 CCL（列控制列表）控制披露

3. ✅ SCQL 的核心价值
   - 数据不出域：原始数据永远留在各自环境
   - 安全计算：在加密态进行计算
   - 细粒度控制：通过 CCL 精确控制数据使用
   - 隐私保护：不暴露双方隐私的联合计算

核心机制：
----------

1. 数据不出域
   Alice 的数据 → 永远在 Alice 的 MySQL
   Bob 的数据   → 永远在 Bob 的 MySQL
   
2. MPC 安全计算
   数据加密 → 加密态计算 → 只披露聚合结果
   
3. CCL 权限控制
   - PLAINTEXT_AFTER_JOIN: JOIN 后可见
   - PLAINTEXT_AFTER_AGGREGATE: 聚合后可见
   - PLAINTEXT_AFTER_COMPARE: 比较后可见

实际示例：
----------

✅ 允许的查询（隐私保护的联合计算）：
SELECT 
  ta.credit_rank,
  AVG(ta.income) as avg_income,
  AVG(tb.order_amount) as avg_amount
FROM demo.user_credit AS ta 
INNER JOIN demo.user_stats AS tb ON ta.id = tb.id
GROUP BY ta.credit_rank;

结果：只能看到聚合后的统计值
+-------------+------------+------------+
| credit_rank | avg_income | avg_amount |
+-------------+------------+------------+
|           6 |  336016.22 |  5499.4043 |
+-------------+------------+------------+

隐私保护：
- Alice 看不到 Bob 的个体 order_amount
- Bob 看不到 Alice 的个体 income
- 只能看到分组的平均值

❌ 被拒绝的查询（违反 CCL）：
SELECT tb.order_amount FROM demo.user_stats AS tb;
错误: CCL 检查失败，必须经过聚合函数

详细文档：
----------
- QUICK_ANSWER.md          - 快速回答
- ANSWER_SUMMARY.md        - 完整答案（含代码分析）
- PRIVACY_QUERY_GUIDE.md   - 隐私查询完整指南
- LOCAL_DEPLOYMENT_GUIDE.md - 本地部署指南

如何开始：
----------
1. 启动服务：bash examples/scdb-tutorial/start_all.sh
2. 使用客户端：bin/scdbclient prompt --host=http://localhost:8080 --usersConfFileName=examples/scdb-tutorial/client/users.json --sync
3. 执行演示：按照 setup_privacy_demo.sql 中的步骤操作

========================================
